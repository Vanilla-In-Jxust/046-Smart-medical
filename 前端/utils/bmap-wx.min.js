var t = function() {
    function t(t, a) {
        for (var e = 0; e < a.length; e++) {
            var i = a[e];
            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), 
            Object.defineProperty(t, i.key, i);
        }
    }
    return function(a, e, i) {
        return e && t(a.prototype, e), i && t(a, i), a;
    };
}(), a = function() {
    function a(t) {
        (function(t, a) {
            if (!(t instanceof a)) throw new TypeError("Cannot call a class as a function");
        })(this, a), this.ak = t.ak;
    }
    return t(a, [ {
        key: "getWXLocation",
        value: function(t, a, e, i) {
            t = t || "gcj02", a = a || function() {}, e = e || function() {}, i = i || function() {}, 
            wx.getLocation({
                type: t,
                success: a,
                fail: e,
                complete: i
            });
        }
    }, {
        key: "search",
        value: function(t) {
            var a = {
                query: (t = t || {}).query || "生活服务$美食&酒店",
                scope: t.scope || 1,
                filter: t.filter || "",
                coord_type: t.coord_type || 2,
                page_size: t.page_size || 10,
                page_num: t.page_num || 0,
                output: t.output || "json",
                ak: this.ak,
                sn: t.sn || "",
                timestamp: t.timestamp || "",
                radius: t.radius || 2e3,
                ret_coordtype: "gcj02ll"
            }, e = {
                iconPath: t.iconPath,
                iconTapPath: t.iconTapPath,
                width: t.width,
                height: t.height,
                alpha: t.alpha || 1,
                success: t.success || function() {},
                fail: t.fail || function() {}
            }, i = function(t) {
                a.location = t.latitude + "," + t.longitude, wx.request({
                    url: "https://api.map.baidu.com/place/v2/search",
                    data: a,
                    header: {
                        "content-type": "application/json"
                    },
                    method: "GET",
                    success: function(t) {
                        var a = t.data;
                        if (0 === a.status) {
                            var i = a.results, n = {};
                            n.originalData = a, n.wxMarkerData = [];
                            for (var o = 0; o < i.length; o++) n.wxMarkerData[o] = {
                                id: o,
                                latitude: i[o].location.lat,
                                longitude: i[o].location.lng,
                                title: i[o].name,
                                iconPath: e.iconPath,
                                iconTapPath: e.iconTapPath,
                                address: i[o].address,
                                telephone: i[o].telephone,
                                alpha: e.alpha,
                                width: e.width,
                                height: e.height
                            };
                            e.success(n);
                        } else e.fail({
                            errMsg: a.message,
                            statusCode: a.status
                        });
                    },
                    fail: function(t) {
                        e.fail(t);
                    }
                });
            };
            if (t.location) {
                var n = t.location.split(",")[1];
                i({
                    errMsg: "input location",
                    latitude: t.location.split(",")[0],
                    longitude: n
                });
            } else this.getWXLocation("gcj02", i, function(t) {
                e.fail(t);
            }, function() {});
        }
    }, {
        key: "suggestion",
        value: function(t) {
            var a = {
                query: (t = t || {}).query || "",
                region: t.region || "全国",
                city_limit: t.city_limit || !1,
                output: t.output || "json",
                ak: this.ak,
                sn: t.sn || "",
                timestamp: t.timestamp || "",
                ret_coordtype: "gcj02ll"
            }, e = {
                success: t.success || function() {},
                fail: t.fail || function() {}
            };
            wx.request({
                url: "https://api.map.baidu.com/place/v2/suggestion",
                data: a,
                header: {
                    "content-type": "application/json"
                },
                method: "GET",
                success: function(t) {
                    var a = t.data;
                    0 === a.status ? e.success(a) : e.fail({
                        errMsg: a.message,
                        statusCode: a.status
                    });
                },
                fail: function(t) {
                    e.fail(t);
                }
            });
        }
    }, {
        key: "regeocoding",
        value: function(t) {
            var a = {
                coordtype: (t = t || {}).coordtype || "gcj02ll",
                pois: t.pois || 0,
                output: t.output || "json",
                ak: this.ak,
                sn: t.sn || "",
                timestamp: t.timestamp || "",
                ret_coordtype: "gcj02ll"
            }, e = {
                iconPath: t.iconPath,
                iconTapPath: t.iconTapPath,
                width: t.width,
                height: t.height,
                alpha: t.alpha || 1,
                success: t.success || function() {},
                fail: t.fail || function() {}
            }, i = function(t) {
                a.location = t.latitude + "," + t.longitude, wx.request({
                    url: "https://api.map.baidu.com/geocoder/v2/",
                    data: a,
                    header: {
                        "content-type": "application/json"
                    },
                    method: "GET",
                    success: function(a) {
                        var i = a.data;
                        if (0 === i.status) {
                            var n = i.result, o = {};
                            o.originalData = i, o.wxMarkerData = [], o.wxMarkerData[0] = {
                                id: 0,
                                latitude: t.latitude,
                                longitude: t.longitude,
                                address: n.formatted_address,
                                iconPath: e.iconPath,
                                iconTapPath: e.iconTapPath,
                                desc: n.sematic_description,
                                business: n.business,
                                alpha: e.alpha,
                                width: e.width,
                                height: e.height
                            }, e.success(o);
                        } else e.fail({
                            errMsg: i.message,
                            statusCode: i.status
                        });
                    },
                    fail: function(t) {
                        e.fail(t);
                    }
                });
            };
            if (t.location) {
                var n = t.location.split(",")[1];
                i({
                    errMsg: "input location",
                    latitude: t.location.split(",")[0],
                    longitude: n
                });
            } else this.getWXLocation("gcj02", i, function(t) {
                e.fail(t);
            }, function() {});
        }
    }, {
        key: "weather",
        value: function(t) {
            var a = {
                coord_type: (t = t || {}).coord_type || "gcj02",
                output: t.output || "json",
                ak: this.ak,
                sn: t.sn || "",
                timestamp: t.timestamp || ""
            }, e = {
                success: t.success || function() {},
                fail: t.fail || function() {}
            }, i = function(t) {
                a.location = t.longitude + "," + t.latitude, wx.request({
                    url: "https://api.map.baidu.com/telematics/v3/weather",
                    data: a,
                    header: {
                        "content-type": "application/json"
                    },
                    method: "GET",
                    success: function(t) {
                        var a = t.data;
                        if (0 === a.error && "success" === a.status) {
                            var i = a.results, n = {};
                            n.originalData = a, n.currentWeather = [], n.currentWeather[0] = {
                                currentCity: i[0].currentCity,
                                pm25: i[0].pm25,
                                date: i[0].weather_data[0].date,
                                temperature: i[0].weather_data[0].temperature,
                                weatherDesc: i[0].weather_data[0].weather,
                                wind: i[0].weather_data[0].wind
                            }, e.success(n);
                        } else e.fail({
                            errMsg: a.message,
                            statusCode: a.status
                        });
                    },
                    fail: function(t) {
                        e.fail(t);
                    }
                });
            };
            if (t.location) {
                var n = t.location.split(",")[0];
                i({
                    errMsg: "input location",
                    latitude: t.location.split(",")[1],
                    longitude: n
                });
            } else this.getWXLocation("gcj02", i, function(t) {
                e.fail(t);
            }, function() {});
        }
    } ]), a;
}();

module.exports.BMapWX = a;