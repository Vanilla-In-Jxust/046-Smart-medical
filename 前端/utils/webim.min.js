var e = require("../@babel/runtime/helpers/interopRequireDefault")(require("../@babel/runtime/helpers/typeof"));

window.Long = function() {
    function e(e, t, n) {
        this.low = 0 | e, this.high = 0 | t, this.unsigned = !!n;
    }
    function t(e) {
        return !0 === (e && e.__isLong__);
    }
    function n(e, t) {
        var n, o, r;
        return t ? (r = 0 <= (e >>>= 0) && e < 256) && (o = a[e]) ? o : (n = i(e, (0 | e) < 0 ? -1 : 0, !0), 
        r && (a[e] = n), n) : (r = -128 <= (e |= 0) && e < 128) && (o = u[e]) ? o : (n = i(e, e < 0 ? -1 : 0, !1), 
        r && (u[e] = n), n);
    }
    function o(e, t) {
        if (isNaN(e) || !isFinite(e)) return t ? m : d;
        if (t) {
            if (e < 0) return m;
            if (e >= p) return _;
        } else {
            if (e <= -f) return E;
            if (e + 1 >= f) return M;
        }
        return e < 0 ? o(-e, t).neg() : i(e % l | 0, e / l | 0, t);
    }
    function i(t, n, o) {
        return new e(t, n, o);
    }
    function r(e, t, n) {
        if (0 === e.length) throw Error("empty string");
        if ("NaN" === e || "Infinity" === e || "+Infinity" === e || "-Infinity" === e) return d;
        if ("number" == typeof t ? (n = t, t = !1) : t = !!t, (n = n || 10) < 2 || 36 < n) throw RangeError("radix");
        var i;
        if ((i = e.indexOf("-")) > 0) throw Error("interior hyphen");
        if (0 === i) return r(e.substring(1), t, n).neg();
        for (var s = o(c(n, 8)), u = d, a = 0; a < e.length; a += 8) {
            var l = Math.min(8, e.length - a), p = parseInt(e.substring(a, a + l), n);
            if (l < 8) {
                var f = o(c(n, l));
                u = u.mul(f).add(o(p));
            } else u = (u = u.mul(s)).add(o(p));
        }
        return u.unsigned = t, u;
    }
    function s(t) {
        return t instanceof e ? t : "number" == typeof t ? o(t) : "string" == typeof t ? r(t) : i(t.low, t.high, t.unsigned);
    }
    e.prototype.__isLong__, Object.defineProperty(e.prototype, "__isLong__", {
        value: !0,
        enumerable: !1,
        configurable: !1
    }), e.isLong = t;
    var u = {}, a = {};
    e.fromInt = n, e.fromNumber = o, e.fromBits = i;
    var c = Math.pow;
    e.fromString = r, e.fromValue = s;
    var l = 4294967296, p = l * l, f = p / 2, g = n(1 << 24), d = n(0);
    e.ZERO = d;
    var m = n(0, !0);
    e.UZERO = m;
    var h = n(1);
    e.ONE = h;
    var I = n(1, !0);
    e.UONE = I;
    var y = n(-1);
    e.NEG_ONE = y;
    var M = i(-1, 2147483647, !1);
    e.MAX_VALUE = M;
    var _ = i(-1, -1, !0);
    e.MAX_UNSIGNED_VALUE = _;
    var E = i(0, -2147483648, !1);
    e.MIN_VALUE = E;
    var T = e.prototype;
    return T.toInt = function() {
        return this.unsigned ? this.low >>> 0 : this.low;
    }, T.toNumber = function() {
        return this.unsigned ? (this.high >>> 0) * l + (this.low >>> 0) : this.high * l + (this.low >>> 0);
    }, T.toString = function(e) {
        if ((e = e || 10) < 2 || 36 < e) throw RangeError("radix");
        if (this.isZero()) return "0";
        if (this.isNegative()) {
            if (this.eq(E)) {
                var t = o(e), n = this.div(t), i = n.mul(t).sub(this);
                return n.toString(e) + i.toInt().toString(e);
            }
            return "-" + this.neg().toString(e);
        }
        for (var r = o(c(e, 6), this.unsigned), s = this, u = ""; ;) {
            var a = s.div(r), l = (s.sub(a.mul(r)).toInt() >>> 0).toString(e);
            if ((s = a).isZero()) return l + u;
            for (;l.length < 6; ) l = "0" + l;
            u = "" + l + u;
        }
    }, T.getHighBits = function() {
        return this.high;
    }, T.getHighBitsUnsigned = function() {
        return this.high >>> 0;
    }, T.getLowBits = function() {
        return this.low;
    }, T.getLowBitsUnsigned = function() {
        return this.low >>> 0;
    }, T.getNumBitsAbs = function() {
        if (this.isNegative()) return this.eq(E) ? 64 : this.neg().getNumBitsAbs();
        for (var e = 0 != this.high ? this.high : this.low, t = 31; t > 0 && 0 == (e & 1 << t); t--) ;
        return 0 != this.high ? t + 33 : t + 1;
    }, T.isZero = function() {
        return 0 === this.high && 0 === this.low;
    }, T.isNegative = function() {
        return !this.unsigned && this.high < 0;
    }, T.isPositive = function() {
        return this.unsigned || this.high >= 0;
    }, T.isOdd = function() {
        return 1 == (1 & this.low);
    }, T.isEven = function() {
        return 0 == (1 & this.low);
    }, T.equals = function(e) {
        return t(e) || (e = s(e)), (this.unsigned === e.unsigned || this.high >>> 31 != 1 || e.high >>> 31 != 1) && this.high === e.high && this.low === e.low;
    }, T.eq = T.equals, T.notEquals = function(e) {
        return !this.eq(e);
    }, T.neq = T.notEquals, T.lessThan = function(e) {
        return this.comp(e) < 0;
    }, T.lt = T.lessThan, T.lessThanOrEqual = function(e) {
        return this.comp(e) <= 0;
    }, T.lte = T.lessThanOrEqual, T.greaterThan = function(e) {
        return this.comp(e) > 0;
    }, T.gt = T.greaterThan, T.greaterThanOrEqual = function(e) {
        return this.comp(e) >= 0;
    }, T.gte = T.greaterThanOrEqual, T.compare = function(e) {
        if (t(e) || (e = s(e)), this.eq(e)) return 0;
        var n = this.isNegative(), o = e.isNegative();
        return n && !o ? -1 : !n && o ? 1 : this.unsigned ? e.high >>> 0 > this.high >>> 0 || e.high === this.high && e.low >>> 0 > this.low >>> 0 ? -1 : 1 : this.sub(e).isNegative() ? -1 : 1;
    }, T.comp = T.compare, T.negate = function() {
        return !this.unsigned && this.eq(E) ? E : this.not().add(h);
    }, T.neg = T.negate, T.add = function(e) {
        t(e) || (e = s(e));
        var n = this.high >>> 16, o = 65535 & this.high, r = this.low >>> 16, u = 65535 & this.low, a = e.high >>> 16, c = 65535 & e.high, l = e.low >>> 16, p = 0, f = 0, g = 0, d = 0;
        return g += (d += u + (65535 & e.low)) >>> 16, f += (g += r + l) >>> 16, p += (f += o + c) >>> 16, 
        p += n + a, i((g &= 65535) << 16 | (d &= 65535), (p &= 65535) << 16 | (f &= 65535), this.unsigned);
    }, T.subtract = function(e) {
        return t(e) || (e = s(e)), this.add(e.neg());
    }, T.sub = T.subtract, T.multiply = function(e) {
        if (this.isZero()) return d;
        if (t(e) || (e = s(e)), e.isZero()) return d;
        if (this.eq(E)) return e.isOdd() ? E : d;
        if (e.eq(E)) return this.isOdd() ? E : d;
        if (this.isNegative()) return e.isNegative() ? this.neg().mul(e.neg()) : this.neg().mul(e).neg();
        if (e.isNegative()) return this.mul(e.neg()).neg();
        if (this.lt(g) && e.lt(g)) return o(this.toNumber() * e.toNumber(), this.unsigned);
        var n = this.high >>> 16, r = 65535 & this.high, u = this.low >>> 16, a = 65535 & this.low, c = e.high >>> 16, l = 65535 & e.high, p = e.low >>> 16, f = 65535 & e.low, m = 0, h = 0, I = 0, y = 0;
        return I += (y += a * f) >>> 16, h += (I += u * f) >>> 16, I &= 65535, h += (I += a * p) >>> 16, 
        m += (h += r * f) >>> 16, h &= 65535, m += (h += u * p) >>> 16, h &= 65535, m += (h += a * l) >>> 16, 
        m += n * f + r * p + u * l + a * c, i((I &= 65535) << 16 | (y &= 65535), (m &= 65535) << 16 | (h &= 65535), this.unsigned);
    }, T.mul = T.multiply, T.divide = function(e) {
        if (t(e) || (e = s(e)), e.isZero()) throw Error("division by zero");
        if (this.isZero()) return this.unsigned ? m : d;
        var n, i, r;
        if (this.unsigned) {
            if (e.unsigned || (e = e.toUnsigned()), e.gt(this)) return m;
            if (e.gt(this.shru(1))) return I;
            r = m;
        } else {
            if (this.eq(E)) return e.eq(h) || e.eq(y) ? E : e.eq(E) ? h : (n = this.shr(1).div(e).shl(1)).eq(d) ? e.isNegative() ? h : y : (i = this.sub(e.mul(n)), 
            r = n.add(i.div(e)));
            if (e.eq(E)) return this.unsigned ? m : d;
            if (this.isNegative()) return e.isNegative() ? this.neg().div(e.neg()) : this.neg().div(e).neg();
            if (e.isNegative()) return this.div(e.neg()).neg();
            r = d;
        }
        for (i = this; i.gte(e); ) {
            n = Math.max(1, Math.floor(i.toNumber() / e.toNumber()));
            for (var u = Math.ceil(Math.log(n) / Math.LN2), a = u <= 48 ? 1 : c(2, u - 48), l = o(n), p = l.mul(e); p.isNegative() || p.gt(i); ) p = (l = o(n -= a, this.unsigned)).mul(e);
            l.isZero() && (l = h), r = r.add(l), i = i.sub(p);
        }
        return r;
    }, T.div = T.divide, T.modulo = function(e) {
        return t(e) || (e = s(e)), this.sub(this.div(e).mul(e));
    }, T.mod = T.modulo, T.not = function() {
        return i(~this.low, ~this.high, this.unsigned);
    }, T.and = function(e) {
        return t(e) || (e = s(e)), i(this.low & e.low, this.high & e.high, this.unsigned);
    }, T.or = function(e) {
        return t(e) || (e = s(e)), i(this.low | e.low, this.high | e.high, this.unsigned);
    }, T.xor = function(e) {
        return t(e) || (e = s(e)), i(this.low ^ e.low, this.high ^ e.high, this.unsigned);
    }, T.shiftLeft = function(e) {
        return t(e) && (e = e.toInt()), 0 == (e &= 63) ? this : e < 32 ? i(this.low << e, this.high << e | this.low >>> 32 - e, this.unsigned) : i(0, this.low << e - 32, this.unsigned);
    }, T.shl = T.shiftLeft, T.shiftRight = function(e) {
        return t(e) && (e = e.toInt()), 0 == (e &= 63) ? this : e < 32 ? i(this.low >>> e | this.high << 32 - e, this.high >> e, this.unsigned) : i(this.high >> e - 32, this.high >= 0 ? 0 : -1, this.unsigned);
    }, T.shr = T.shiftRight, T.shiftRightUnsigned = function(e) {
        if (t(e) && (e = e.toInt()), 0 == (e &= 63)) return this;
        var n = this.high;
        return e < 32 ? i(this.low >>> e | n << 32 - e, n >>> e, this.unsigned) : i(32 === e ? n : n >>> e - 32, 0, this.unsigned);
    }, T.shru = T.shiftRightUnsigned, T.toSigned = function() {
        return this.unsigned ? i(this.low, this.high, !1) : this;
    }, T.toUnsigned = function() {
        return this.unsigned ? this : i(this.low, this.high, !0);
    }, T.toBytes = function(e) {
        return e ? this.toBytesLE() : this.toBytesBE();
    }, T.toBytesLE = function() {
        var e = this.high, t = this.low;
        return [ 255 & t, t >>> 8 & 255, t >>> 16 & 255, t >>> 24 & 255, 255 & e, e >>> 8 & 255, e >>> 16 & 255, e >>> 24 & 255 ];
    }, T.toBytesBE = function() {
        var e = this.high, t = this.low;
        return [ e >>> 24 & 255, e >>> 16 & 255, e >>> 8 & 255, 255 & e, t >>> 24 & 255, t >>> 16 & 255, t >>> 8 & 255, 255 & t ];
    }, e;
}(), "function" != typeof Array.prototype.forEach && (Array.prototype.forEach = function(e) {
    for (var t = 0; t < this.length; t++) e.apply(this, [ this[t], t, this ]);
});

var t = {};

!function(n) {
    var o = "1.7.2", i = "537048168", r = "10", s = !0, u = {
        FORMAL: {
            COMMON: "https://webim.tim.qq.com",
            PIC: "https://pic.tim.qq.com"
        },
        TEST: {
            COMMON: "https://test.tim.qq.com",
            PIC: "https://pic.tim.qq.com"
        }
    }, a = {}, c = !1, l = "openim", p = "group_open_http_svc", f = "sns", g = "profile", d = "recentcontact", m = "openpic", h = "group_open_http_noauth_svc", I = "group_open_long_polling_http_noauth_svc", y = "imopenstat", M = "recentcontact", _ = "webim", E = {
        openim: "v4",
        group_open_http_svc: "v4",
        sns: "v4",
        profile: "v4",
        recentcontact: "v4",
        openpic: "v4",
        group_open_http_noauth_svc: "v1",
        group_open_long_polling_http_noauth_svc: "v1",
        imopenstat: "v4",
        webim: "v3"
    }, T = {
        login: 1,
        pic_up: 3,
        apply_join_group: 9,
        create_group: 10,
        longpolling: 18,
        send_group_msg: 19,
        sendmsg: 20
    }, A = {
        C2C: "C2C",
        GROUP: "GROUP"
    }, C = {
        OK: "OK",
        FAIL: "FAIL"
    }, v = {
        TEXT: "TIMTextElem",
        FACE: "TIMFaceElem",
        IMAGE: "TIMImageElem",
        CUSTOM: "TIMCustomElem",
        SOUND: "TIMSoundElem",
        FILE: "TIMFileElem",
        LOCATION: "TIMLocationElem",
        GROUP_TIP: "TIMGroupTipElem"
    }, S = {
        ORIGIN: 1,
        LARGE: 2,
        SMALL: 3
    }, F = {
        JPG: 1,
        JPEG: 1,
        GIF: 2,
        PNG: 3,
        BMP: 4,
        UNKNOWN: 255
    }, G = {
        RAW_DATA: 0,
        BASE64_DATA: 1
    }, N = "10001", b = "grouptalk.c2c.qq.com", O = 2106, R = 2107, w = {
        IMAGE: 1,
        FILE: 2,
        SHORT_VIDEO: 3,
        SOUND: 4
    }, L = {
        APP_VERSION: "2.1",
        SERVER_VERSION: 1
    }, P = {
        C2C: 1,
        GROUP_COMMON: 3,
        GROUP_TIP: 4,
        GROUP_SYSTEM: 5,
        GROUP_TIP2: 6,
        FRIEND_NOTICE: 7,
        PROFILE_NOTICE: 8,
        C2C_COMMON: 9,
        C2C_EVENT: 10
    }, U = {
        COMMON: 0
    }, k = 92, D = 96, q = {
        COMMON: 0,
        LOVEMSG: 1,
        TIP: 2,
        REDPACKET: 3
    }, B = 1, x = 3, K = {
        JOIN: 1,
        QUIT: 2,
        KICK: 3,
        SET_ADMIN: 4,
        CANCEL_ADMIN: 5,
        MODIFY_GROUP_INFO: 6,
        MODIFY_MEMBER_INFO: 7
    }, H = {
        FACE_URL: 1,
        NAME: 2,
        OWNER: 3,
        NOTIFICATION: 4,
        INTRODUCTION: 5
    }, J = {
        JOIN_GROUP_REQUEST: 1,
        JOIN_GROUP_ACCEPT: 2,
        JOIN_GROUP_REFUSE: 3,
        KICK: 4,
        DESTORY: 5,
        CREATE: 6,
        INVITED_JOIN_GROUP_REQUEST: 7,
        QUIT: 8,
        SET_ADMIN: 9,
        CANCEL_ADMIN: 10,
        REVOKE: 11,
        READED: 15,
        CUSTOM: 255,
        INVITED_JOIN_GROUP_REQUEST_AGREE: 12
    }, z = {
        FRIEND_ADD: 1,
        FRIEND_DELETE: 2,
        PENDENCY_ADD: 3,
        PENDENCY_DELETE: 4,
        BLACK_LIST_ADD: 5,
        BLACK_LIST_DELETE: 6,
        PENDENCY_REPORT: 7,
        FRIEND_UPDATE: 8
    }, V = 1, Y = {
        INIT: -1,
        ON: 0,
        RECONNECT: 1,
        OFF: 9999
    }, X = 14, j = Y.INIT, W = !1, Q = 0, Z = 6e4, $ = null, ee = 0, te = 0, ne = 0, oe = null, ie = null, re = 0, se = [], ue = null, ae = {
        sdkAppID: null,
        appIDAt3rd: null,
        accountType: null,
        identifier: null,
        tinyid: null,
        identifierNick: null,
        userSig: null,
        a2: null,
        contentType: "json",
        apn: 1
    }, ce = {}, le = 0, pe = {}, fe = 0, ge = [], de = [], me = [], he = null, Ie = {
        downloadMap: {}
    }, ye = {
        "[惊讶]": 0,
        "[撇嘴]": 1,
        "[色]": 2,
        "[发呆]": 3,
        "[得意]": 4,
        "[流泪]": 5,
        "[害羞]": 6,
        "[闭嘴]": 7,
        "[睡]": 8,
        "[大哭]": 9,
        "[尴尬]": 10,
        "[发怒]": 11,
        "[调皮]": 12,
        "[龇牙]": 13,
        "[微笑]": 14,
        "[难过]": 15,
        "[酷]": 16,
        "[冷汗]": 17,
        "[抓狂]": 18,
        "[吐]": 19,
        "[偷笑]": 20,
        "[可爱]": 21,
        "[白眼]": 22,
        "[傲慢]": 23,
        "[饿]": 24,
        "[困]": 25,
        "[惊恐]": 26,
        "[流汗]": 27,
        "[憨笑]": 28,
        "[大兵]": 29,
        "[奋斗]": 30,
        "[咒骂]": 31,
        "[疑问]": 32,
        "[嘘]": 33,
        "[晕]": 34
    }, Me = {}, _e = new function() {
        this.formatTimeStamp = function(e, t) {
            if (!e) return 0;
            var n;
            t = t || "yyyy-MM-dd hh:mm:ss";
            var o = new Date(1e3 * e), i = {
                "M+": o.getMonth() + 1,
                "d+": o.getDate(),
                "h+": o.getHours(),
                "m+": o.getMinutes(),
                "s+": o.getSeconds()
            };
            for (var r in n = /(y+)/.test(t) ? t.replace(RegExp.$1, (o.getFullYear() + "").substr(4 - RegExp.$1.length)) : t, 
            i) new RegExp("(" + r + ")").test(n) && (n = n.replace(RegExp.$1, 1 == RegExp.$1.length ? i[r] : ("00" + i[r]).substr(("" + i[r]).length)));
            return n;
        }, this.groupTypeEn2Ch = function(e) {
            var t = null;
            switch (e) {
              case "Public":
                t = "公开群";
                break;

              case "ChatRoom":
                t = "聊天室";
                break;

              case "Private":
                t = "私有群";
                break;

              case "AVChatRoom":
                t = "直播聊天室";
                break;

              default:
                t = e;
            }
            return t;
        }, this.groupTypeCh2En = function(e) {
            var t = null;
            switch (e) {
              case "公开群":
                t = "Public";
                break;

              case "聊天室":
                t = "ChatRoom";
                break;

              case "私有群":
                t = "Private";
                break;

              case "直播聊天室":
                t = "AVChatRoom";
                break;

              default:
                t = e;
            }
            return t;
        }, this.groupRoleEn2Ch = function(e) {
            var t = null;
            switch (e) {
              case "Member":
                t = "成员";
                break;

              case "Admin":
                t = "管理员";
                break;

              case "Owner":
                t = "群主";
                break;

              default:
                t = e;
            }
            return t;
        }, this.groupRoleCh2En = function(e) {
            var t = null;
            switch (e) {
              case "成员":
                t = "Member";
                break;

              case "管理员":
                t = "Admin";
                break;

              case "群主":
                t = "Owner";
                break;

              default:
                t = e;
            }
            return t;
        }, this.groupMsgFlagEn2Ch = function(e) {
            var t = null;
            switch (e) {
              case "AcceptAndNotify":
                t = "接收并提示";
                break;

              case "AcceptNotNotify":
                t = "接收不提示";
                break;

              case "Discard":
                t = "屏蔽";
                break;

              default:
                t = e;
            }
            return t;
        }, this.groupMsgFlagCh2En = function(e) {
            var t = null;
            switch (e) {
              case "接收并提示":
                t = "AcceptAndNotify";
                break;

              case "接收不提示":
                t = "AcceptNotNotify";
                break;

              case "屏蔽":
                t = "Discard";
                break;

              default:
                t = e;
            }
            return t;
        }, this.formatText2Html = function(e) {
            var t = e;
            return t && (t = (t = (t = this.xssFilter(t)).replace(/ /g, "&nbsp;")).replace(/\n/g, "<br/>")), 
            t;
        }, this.formatHtml2Text = function(e) {
            var t = e;
            return t && (t = (t = t.replace(/&nbsp;/g, " ")).replace(/<br\/>/g, "\n")), t;
        }, this.getStrBytes = function(e) {
            if (null == e || void 0 === e) return 0;
            if ("string" != typeof e) return 0;
            var t, n, o, i = 0;
            for (n = 0, o = e.length; n < o; n++) i += (t = e.charCodeAt(n)) <= 127 ? 1 : t <= 2047 ? 2 : t <= 65535 ? 3 : 4;
            return i;
        }, this.xssFilter = function(e) {
            return (e = (e = (e = e.toString()).replace(/[<]/g, "&lt;")).replace(/[>]/g, "&gt;")).replace(/"/g, "&quot;");
        }, this.trimStr = function(e) {
            return e ? (e = e.toString()).replace(/(^\s*)|(\s*$)/g, "") : "";
        }, this.validNumber = function(e) {
            return (e = e.toString()).match(/(^\d{1,8}$)/g);
        }, this.getReturnError = function(e, t) {
            return t || (t = -100), {
                ActionStatus: C.FAIL,
                ErrorCode: t,
                ErrorInfo: e + "[" + t + "]"
            };
        }, this.setCookie = function(e, t, n, o, i) {
            var r = new Date();
            r.setTime(r.getTime() + 1e3 * n), document.cookie = e + "=" + escape(t) + ";expires=" + r.toGMTString();
        }, this.getCookie = function(e) {
            var t = document.cookie.match(new RegExp("(^| )" + e + "=([^;]*)(;|$)"));
            return null != t ? unescape(t[2]) : null;
        }, this.delCookie = function(e) {
            var t = new Date();
            t.setTime(t.getTime() - 1);
            var n = this.getCookie(e);
            null != n && (document.cookie = e + "=" + escape(n) + ";expires=" + t.toGMTString());
        }, this.getQueryString = function(e) {
            var t = new RegExp("(^|&)" + e + "=([^&]*)(&|$)", "i"), n = window.location.search.substr(1).match(t);
            return null != n ? unescape(n[2]) : null;
        }, this.isIE = function(e) {
            var t = document.createElement("b");
            return t.innerHTML = "\x3c!--[if IE " + e + "]><i></i><![endif]--\x3e", 1 === t.getElementsByTagName("i").length;
        }, this.getBrowserInfo = function() {
            var e, t = {}, n = navigator.userAgent.toLowerCase();
            return Ee.info("navigator.userAgent=" + n), (e = n.match(/msie ([\d.]+)/)) ? t.ie = e[1] : (e = n.match(/firefox\/([\d.]+)/)) ? t.firefox = e[1] : (e = n.match(/chrome\/([\d.]+)/)) ? t.chrome = e[1] : (e = n.match(/opera.([\d.]+)/)) ? t.opera = e[1] : (e = n.match(/version\/([\d.]+).*safari/)) && (t.safari = e[1]), 
            t.ie ? (n.match(/trident\/(\d)\./) && 6 == n.match(/trident\/(\d)\./)[1] && (t.ie = 10), 
            {
                type: "ie",
                ver: t.ie
            }) : t.firefox ? {
                type: "firefox",
                ver: t.firefox
            } : t.chrome ? {
                type: "chrome",
                ver: t.chrome
            } : t.opera ? {
                type: "opera",
                ver: t.opera
            } : t.safari ? {
                type: "safari",
                ver: t.safari
            } : {
                type: "unknow",
                ver: -1
            };
        }, this.replaceObject = function(t, n) {
            for (var o in n) if (t[o]) if (n[t[o]] = n[o], delete n[o], n[t[o]] instanceof Array) for (var i = n[t[o]].length, r = 0; r < i; r++) n[t[o]][r] = this.replaceObject(t, n[t[o]][r]); else "object" == (0, 
            e.default)(n[t[o]]) && (n[t[o]] = this.replaceObject(t, n[t[o]]));
            return n;
        };
    }(), Ee = new function() {
        var e = !0;
        this.setOn = function(t) {
            e = t;
        }, this.getOn = function() {
            return e;
        }, this.error = function(t) {
            try {
                e && console.error(t);
            } catch (e) {}
        }, this.warn = function(t) {
            try {
                e && console.warn(t);
            } catch (e) {}
        }, this.info = function(t) {
            try {
                e && console.info(t);
            } catch (e) {}
        }, this.debug = function(t) {
            try {
                e && console.debug(t);
            } catch (e) {}
        };
    }(), Te = function(e) {
        return e || (e = new Date()), Math.round(e.getTime() / 1e3);
    }, Ae = function() {
        return fe ? fe += 1 : fe = Math.round(1e7 * Math.random()), fe;
    }, Ce = function() {
        return Math.round(4294967296 * Math.random());
    }, ve = function(e, t, n, o, i, r, s, u) {
        var a, c = function() {
            var e = null;
            if (window.XMLHttpRequest) e = new XMLHttpRequest(); else try {
                e = new ActiveXObject("Msxml2.XMLHTTP");
            } catch (t) {
                try {
                    e = new ActiveXObject("Microsoft.XMLHTTP");
                } catch (e) {
                    return null;
                }
            }
            return e;
        }();
        if (!c) {
            a = "创建请求失败";
            var l = _e.getReturnError(a, -1);
            return Ee.error(a), void (u && u(l));
        }
        pe[++le] = c, c.open(e, t, !0), c.onreadystatechange = function() {
            4 == c.readyState && (pe[le] = null, 200 == c.status ? (s && s(c.responseText), 
            c = null, Q = ee = 0) : (c = null, setTimeout(function() {
                var e = _e.getReturnError("请求服务器失败,请检查你的网络是否正常", -2);
                r && he && he(e), u && u(e);
            }, 16)));
        }, c.setRequestHeader("Content-Type", i), o || (o = 15e3), o && (c.timeout = o, 
        c.ontimeout = function(e) {
            c = null;
        }), c.overrideMimeType, c.send(n);
    }, Se = function() {
        return ae.sdkAppID && ae.identifier;
    }, Fe = function(e, t) {
        if (!Se()) {
            if (t) {
                var n = _e.getReturnError("请登录", -4);
                e && e(n);
            }
            return !1;
        }
        return !0;
    }, Ge = function() {
        return s;
    }, Ne = function(e, t, n, s) {
        var a = u;
        a = Ge() ? u.FORMAL.COMMON : u.TEST.COMMON, e == m && (a = Ge() ? u.FORMAL.PIC : u.TEST.PIC);
        var c = a + "/" + E[e] + "/" + e + "/" + t + "?websdkappid=" + i + "&v=" + o + "&platform=" + r;
        if (Se()) {
            if ("login" == t || "accesslayer" == t) c += "&identifier=" + encodeURIComponent(ae.identifier) + "&usersig=" + ae.userSig; else if (ae.tinyid && ae.a2) c += "&tinyid=" + ae.tinyid + "&a2=" + ae.a2; else if (s) return Ee.error("tinyid或a2为空[" + e + "][" + t + "]"), 
            s(_e.getReturnError("tinyid或a2为空[" + e + "][" + t + "]", -5)), !1;
            c += "&contenttype=" + ae.contentType;
        }
        return c + "&sdkappid=" + ae.sdkAppID + "&accounttype=" + ae.accountType + "&apn=" + ae.apn + "&reqtime=" + Te();
    }, be = function(e, t, n) {
        var o = null;
        return ue && se[0] ? o = "http://" + se[0] + "/asn.com/stddownload_common_file?authkey=" + ue + "&bid=" + N + "&subbid=" + ae.sdkAppID + "&fileid=" + e + "&filetype=" + R + "&openid=" + t + "&ver=0&filename=" + encodeURIComponent(n) : Ee.error("拼接文件下载url不报错：ip或者authkey为空"), 
        Ie.downloadMap["uuid_" + e] = o, o;
    }, Oe = function(e, t, n, o, i, r, s) {
        var u = {
            From_Account: t,
            To_Account: i,
            os_platform: 10,
            Timestamp: Te().toString(),
            Random: Ce().toString(),
            request_info: [ {
                busi_id: r,
                download_flag: o,
                type: s,
                uuid: e,
                version: L.SERVER_VERSION,
                auth_key: ue,
                ip: se[0]
            } ]
        };
        je(u, function(e) {
            0 == e.error_code && e.response_info && (Ie.downloadMap["uuid_" + u.uuid] = e.response_info.url), 
            onAppliedDownloadUrl && onAppliedDownloadUrl({
                uuid: u.uuid,
                url: e.response_info.url,
                maps: Ie.downloadMap
            });
        }, function(e) {
            Ee.error("获取下载地址失败", u.uuid);
        });
    }, Re = function() {
        (function() {
            for (var e in pe) {
                var t = pe[e];
                t && (t.abort(), pe[le] = null);
            }
            le = 0, pe = {};
        })(), ae = {
            sdkAppID: null,
            appIDAt3rd: null,
            accountType: null,
            identifier: null,
            identifierNick: null,
            userSig: null,
            contentType: "json",
            apn: 1
        }, ce = {}, fe = 0, ne = 0, oe = null, me = [], nt.clear(), tt.clear(), $ = null;
    }, we = function(e, t, n, o, i) {
        return Re(), n && (ce = n), 0 == ce.isAccessFormalEnv && (Ee.error("请切换为正式环境！！！！"), 
        s = ce.isAccessFormalEnv), 0 == ce.isLogOn && Ee.setOn(ce.isLogOn), !e && i ? void i(_e.getReturnError("loginInfo is empty", -6)) : !e.sdkAppID && i ? void i(_e.getReturnError("loginInfo.sdkAppID is empty", -7)) : !e.accountType && i ? void i(_e.getReturnError("loginInfo.accountType is empty", -8)) : (e.identifier && (ae.identifier = e.identifier.toString()), 
        e.identifier && !e.userSig && i ? void i(_e.getReturnError("loginInfo.userSig is empty", -9)) : (e.userSig && (ae.userSig = e.userSig.toString()), 
        ae.sdkAppID = e.sdkAppID, ae.accountType = e.accountType, void (ae.identifier && ae.userSig ? Pe(function() {
            Ue(function(e, n) {
                nt.init(t, function(t) {
                    o && (t.identifierNick = e, t.headurl = n, o(t));
                }, i);
            }, i);
        }) : nt.init(t, o, i))));
    }, Le = function(e, t, n) {
        if ("longpolling" != e || 60008 != t && 91101 != t) {
            var i = T[e];
            if (i) {
                var r = Te(), s = null, u = {
                    Code: t,
                    ErrMsg: n
                };
                if (ae.a2 ? s = ae.a2.substring(0, 10) + "_" + r + "_" + Ce() : ae.userSig && (s = ae.userSig.substring(0, 10) + "_" + r + "_" + Ce()), 
                s) {
                    var a = {
                        UniqKey: s,
                        EventId: i,
                        ReportTime: r,
                        MsgCmdErrorCode: u
                    };
                    if ("login" == e) {
                        var c = [];
                        c.push(a), Ye({
                            EvtItems: c,
                            MainVersion: o,
                            Version: "0"
                        }, function(e) {
                            c = null;
                        }, function(e) {
                            c = null;
                        });
                    } else if (me.push(a), me.length >= 20) {
                        Ye({
                            EvtItems: me,
                            MainVersion: o,
                            Version: "0"
                        }, function(e) {
                            me = [];
                        }, function(e) {
                            me = [];
                        });
                    }
                }
            }
        }
    }, Pe = function(e) {
        We.apiCall(_, "accesslayer", {}, function(t) {
            0 === t.ErrorCode && 1 === t.WebImAccessLayer && (u.FORMAL.COMMON = "https://events.tim.qq.com"), 
            e();
        }, function() {
            e();
        });
    }, Ue = function(e, t) {
        We.apiCall(l, "login", {
            State: "Online"
        }, function(n) {
            if (n.TinyId) ae.tinyid = n.TinyId; else if (t) return void t(_e.getReturnError("TinyId is empty", -10));
            if (n.A2Key) ae.a2 = n.A2Key; else if (t) return void t(_e.getReturnError("A2Key is empty", -11));
            var o = {
                From_Account: ae.identifier,
                To_Account: [ ae.identifier ],
                LastStandardSequence: 0,
                TagList: [ "Tag_Profile_IM_Nick", "Tag_Profile_IM_Image" ]
            };
            ze(o, function(t) {
                var n, o;
                if (t.UserProfileItem && t.UserProfileItem.length > 0) for (var i in t.UserProfileItem) for (var r in t.UserProfileItem[i].ProfileItem) switch (t.UserProfileItem[i].ProfileItem[r].Tag) {
                  case "Tag_Profile_IM_Nick":
                    (n = t.UserProfileItem[i].ProfileItem[r].Value) && (ae.identifierNick = n);
                    break;

                  case "Tag_Profile_IM_Image":
                    (o = t.UserProfileItem[i].ProfileItem[r].Value) && (ae.headurl = o);
                }
                e && e(ae.identifierNick, ae.headurl);
            }, t);
        }, t);
    }, ke = function(e, t, n) {
        if (!Fe(n, !1)) return Re(), void (t && t({
            ActionStatus: C.OK,
            ErrorCode: 0,
            ErrorInfo: "logout success"
        }));
        "all" == e ? We.apiCall(l, "logout", {}, function(e) {
            Re(), t && t(e);
        }, n) : We.apiCall(l, "longpollinglogout", {
            LongPollingId: $
        }, function(e) {
            Re(), t && t(e);
        }, n);
    }, De = function(e, t, n) {
        (s || "undefined" == typeof stopPolling || 1 != stopPolling) && Fe(n, !0) && We.apiCall(l, "longpolling", e, t, n, Z, !0);
    }, qe = function e(t, n, o, i) {
        Fe(i, !0) && We.apiCall(l, "getmsg", {
            Cookie: t,
            SyncFlag: n
        }, function(t) {
            if (t.MsgList && t.MsgList.length) for (var n in t.MsgList) ge.push(t.MsgList[n]);
            1 == t.SyncFlag ? e(t.Cookie, t.SyncFlag, o, i) : (t.MsgList = ge, ge = [], o && o(t));
        }, i);
    }, Be = function(e, t, n, o) {
        if (Fe(o, !0)) {
            var i = [];
            for (var r in t) {
                var s = {
                    To_Account: t[r].toAccount,
                    LastedMsgTime: t[r].lastedMsgTime,
                    Receipt: isPeerRead
                };
                i.push(s);
            }
            We.apiCall(l, "msgreaded", {
                C2CMsgReaded: {
                    Cookie: e,
                    C2CMsgReadedItem: i
                }
            }, n, o);
        }
    }, xe = function e(t, n, o) {
        Fe(o, !0) && We.apiCall(l, "getroammsg", t, function(i) {
            var r = t.MaxCnt, s = i.Complete, u = i.MaxCnt, a = i.MsgKey, c = i.LastMsgTime;
            if (i.MsgList && i.MsgList.length) for (var l in i.MsgList) de.push(i.MsgList[l]);
            var p = null;
            0 == s && u < r && (p = {
                Peer_Account: t.Peer_Account,
                MaxCnt: r - u,
                LastMsgTime: c,
                MsgKey: a
            }), p ? e(p, n, o) : (i.MsgList = de, de = [], n && n(i));
        }, o);
    }, Ke = function(e, t, n) {
        Fe(n, !0) && We.apiCall(p, "get_joined_group_list", {
            Member_Account: e.Member_Account,
            Limit: e.Limit,
            Offset: e.Offset,
            GroupType: e.GroupType,
            ResponseFilter: {
                GroupBaseInfoFilter: e.GroupBaseInfoFilter,
                SelfInfoFilter: e.SelfInfoFilter
            }
        }, t, n);
    }, He = function(e, t, n) {
        Fe(n, !0) && We.apiCall(p, "msg_read_report", {
            GroupId: e.GroupId,
            MsgReadedSeq: e.MsgReadedSeq
        }, t, n);
    }, Je = function(e) {
        var t = [];
        if (e.Fail_Account && e.Fail_Account.length && (t = e.Fail_Account), e.Invalid_Account && e.Invalid_Account.length) for (var n in e.Invalid_Account) t.push(e.Invalid_Account[n]);
        if (t.length) for (var o in e.ActionStatus = C.FAIL, e.ErrorCode = 99999, e.ErrorInfo = "", 
        t) {
            var i = t[o];
            for (var r in e.ResultItem) if (e.ResultItem[r].To_Account == i) {
                var s = e.ResultItem[r].ResultCode;
                e.ResultItem[r].ResultInfo = "[" + s + "]" + e.ResultItem[r].ResultInfo, e.ErrorInfo += e.ResultItem[r].ResultInfo + "\n";
                break;
            }
        }
        return e;
    }, ze = function(e, t, n) {
        e.To_Account.length > 100 && (e.To_Account.length = 100, Ee.error("获取用户资料人数不能超过100人")), 
        Fe(n, !0) && We.apiCall(g, "portrait_get", {
            From_Account: ae.identifier,
            To_Account: e.To_Account,
            TagList: e.TagList
        }, function(e) {
            var o = [];
            if (e.Fail_Account && e.Fail_Account.length && (o = e.Fail_Account), e.Invalid_Account && e.Invalid_Account.length) for (var i in e.Invalid_Account) o.push(e.Invalid_Account[i]);
            if (o.length) for (var r in e.ActionStatus = C.FAIL, e.ErrorCode = 99999, e.ErrorInfo = "", 
            o) {
                var s = o[r];
                for (var u in e.UserProfileItem) if (e.UserProfileItem[u].To_Account == s) {
                    var a = e.UserProfileItem[u].ResultCode;
                    e.UserProfileItem[u].ResultInfo = "[" + a + "]" + e.UserProfileItem[u].ResultInfo, 
                    e.ErrorInfo += "账号:" + s + "," + e.UserProfileItem[u].ResultInfo + "\n";
                    break;
                }
            }
            e.ActionStatus == C.FAIL ? n && n(e) : t && t(e);
        }, n);
    }, Ve = function(e, t, n) {
        var o;
        Fe(n, !0) && (o = Ge() ? "pic_up" : "pic_up_test", We.apiCall(m, o, {
            App_Version: L.APP_VERSION,
            From_Account: ae.identifier,
            To_Account: e.To_Account,
            Seq: e.Seq,
            Timestamp: e.Timestamp,
            Random: e.Random,
            File_Str_Md5: e.File_Str_Md5,
            File_Size: e.File_Size,
            File_Type: e.File_Type,
            Server_Ver: L.SERVER_VERSION,
            Auth_Key: ue,
            Busi_Id: e.Busi_Id,
            PkgFlag: e.PkgFlag,
            Slice_Offset: e.Slice_Offset,
            Slice_Size: e.Slice_Size,
            Slice_Data: e.Slice_Data,
            content_type: "application/x-www-form-urlencoded"
        }, t, n));
    }, Ye = function(e, t, n) {
        Fe(n, !0) && We.apiCall(y, "web_report", e, t, n);
    }, Xe = function(e, t, n) {
        Fe(n, !0) && We.apiCall(l, "getlongpollingid", {}, function(e) {
            t && t(e);
        }, n);
    }, je = function(e, t, n) {
        We.apiCall(m, "apply_download", e, t, n);
    };
    a = _e.getBrowserInfo(), Ee.info("BROWSER_INFO: type=" + a.type + ", ver=" + a.ver), 
    "ie" == a.type && parseInt(a.ver) < 10 && (c = !0);
    var We = 0 == c ? new function() {
        var e = null;
        this.init = function(t, n, o) {
            t && (e = t);
        }, this.callBack = function(t) {
            e && e(t);
        }, this.clear = function() {
            e = null;
        }, this.apiCall = function(e, t, n, o, i, r, s) {
            var u = Ne(e, t, 0, i);
            if (0 != u) {
                var a = n.content_type ? n.content_type : "application/x-www-form-urlencoded";
                !function(e, t, n, o, i, r, s, u) {
                    ve(e, t, JSON.stringify(n), o, i, r, function(e) {
                        var t = null;
                        e && (t = JSON.parse(e)), r && he && he(t), s && s(t);
                    }, u);
                }("POST", u, n, r, a, s, function(r) {
                    var s = null, a = "";
                    "pic_up" == t && (n.Slice_Data = "");
                    var c = "\n request url: \n" + u + "\n request body: \n" + JSON.stringify(n) + "\n response: \n" + JSON.stringify(r);
                    r.ActionStatus == C.OK ? (Ee.info("[" + e + "][" + t + "]success: " + c), o && o(r), 
                    s = 0, a = "") : (s = r.ErrorCode, a = r.ErrorInfo, i && (r.SrcErrorInfo = r.ErrorInfo, 
                    r.ErrorInfo = "[" + e + "][" + t + "]failed: " + c, "longpolling" == t && 60008 == r.ErrorCode || Ee.error(r.ErrorInfo), 
                    i(r))), Le(t, s, a);
                }, function(e) {
                    i && i(e), Le(t, e.ErrorCode, e.ErrorInfo);
                });
            }
        };
    }() : new function() {
        var e = null;
        this.init = function(t, n, o) {
            t && (e = t);
        }, this.callBack = function(t) {
            e && e(t);
        }, this.clear = function() {
            e = null;
        }, this.apiCall = function(e, t, n, o, i, r, s) {
            var u = Ne(e, t, 0, i);
            if (0 != u) {
                var a = ne++, c = "jsonpRequest" + a, l = document.createElement("script"), p = 0;
                window[c] = ie, l.type = "text/javascript", u = u + "&jsonpcallback=" + c + "&jsonpbody=" + encodeURIComponent(JSON.stringify(n)), 
                l.src = u, l.async = !0, void 0 !== l.onreadystatechange && (l.event = "onclick", 
                l.htmlFor = l.id = "_jsonpRequest_" + a), l.onload = l.onreadystatechange = function() {
                    if (this.readyState && "complete" !== this.readyState && "loaded" !== this.readyState || p) return !1;
                    l.onload = l.onreadystatechange = null, l.onclick && l.onclick();
                    var r = oe, s = "\n request url: \n" + u + "\n request body: \n" + JSON.stringify(n) + "\n response: \n" + JSON.stringify(r);
                    r.ActionStatus == C.OK ? (Ee.info("[" + e + "][" + t + "]success: " + s), o && o(r)) : (r.ErrorInfo = "[" + e + "][" + t + "]failed " + s, 
                    "longpolling" != t || 60008 != r.ErrorCode ? Ee.error(r.ErrorInfo) : Ee.warn("[" + e + "][" + t + "]success: " + s), 
                    i && i(r)), oe = void 0, document.body.removeChild(l), p = 1;
                }, document.body.appendChild(l);
            }
        };
    }(), Qe = function e(t, n, o, i, r, s) {
        this._impl = {
            skey: e.skey(t, n),
            type: t,
            id: n,
            name: o,
            icon: i,
            unread: 0,
            isAutoRead: !1,
            time: r >= 0 ? r : 0,
            curMaxMsgSeq: s >= 0 ? s : 0,
            msgs: [],
            isFinished: 1
        };
    };
    Qe.skey = function(e, t) {
        return e + t;
    }, Qe.prototype.type = function() {
        return this._impl.type;
    }, Qe.prototype.id = function() {
        return this._impl.id;
    }, Qe.prototype.name = function() {
        return this._impl.name;
    }, Qe.prototype.icon = function() {
        return this._impl.icon;
    }, Qe.prototype.unread = function(e) {
        if (void 0 === e) return this._impl.unread;
        this._impl.unread = e;
    }, Qe.prototype.isFinished = function(e) {
        if (void 0 === e) return this._impl.isFinished;
        this._impl.isFinished = e;
    }, Qe.prototype.time = function() {
        return this._impl.time;
    }, Qe.prototype.curMaxMsgSeq = function(e) {
        if (void 0 === e) return this._impl.curMaxMsgSeq;
        this._impl.curMaxMsgSeq = e;
    }, Qe.prototype.msgCount = function() {
        return this._impl.msgs.length;
    }, Qe.prototype.msg = function(e) {
        return this._impl.msgs[e];
    }, Qe.prototype.msgs = function() {
        return this._impl.msgs;
    }, Qe.prototype._impl_addMsg = function(e, t) {
        this._impl.msgs.push(e), e.time > this._impl.time && (this._impl.time = e.time), 
        e.seq > this._impl.curMaxMsgSeq && (this._impl.curMaxMsgSeq = e.seq), e.isSend || this._impl.isAutoRead || !t || this._impl.unread++;
    };
    var Ze = function(e, t) {
        this.toAccount = e, this.lastedMsgTime = t;
    }, $e = function(e, t) {
        for (var n = parseInt(e).toString(2) + "00000000000000000000000000000000", o = parseInt(t).toString(2), i = n.split("").reverse(), r = o.split("").reverse(), s = null, u = [], a = i.length > r.length ? i.length : r.length, c = 0; c < a; c++) s = Number(i[c] || 0) || Number(r[c] || 0), 
        u.push(s);
        var l = u.reverse().join(""), p = {
            high: "0x" + parseInt(l.substr(0, l.length - 32), 2).toString(16),
            low: "0x" + parseInt(l.substr(l.length - 32 - 1), 2).toString(16)
        };
        return new Long(p.low, p.high, !0).toString();
    }, et = function(e, t, n, o, i, r, s, u, a) {
        switch (this.sess = e, this.subType = s >= 0 ? s : 0, this.fromAccount = r, this.fromAccountNick = u || r, 
        this.fromAccountHeadurl = a || null, this.isSend = Boolean(t), this.seq = n >= 0 ? n : Ae(), 
        this.random = o >= 0 ? o : Ce(), this.time = i >= 0 ? i : Te(), this.elems = [], 
        e.type()) {
          case A.GROUP:
            this.uniqueId = $e(this.seq, this.random);
            break;

          case A.C2C:
          default:
            this.uniqueId = $e(this.time, this.random);
        }
    };
    et.prototype.getSession = function() {
        return this.sess;
    }, et.prototype.getType = function() {
        return this.subType;
    }, et.prototype.getSubType = function() {
        return this.subType;
    }, et.prototype.getFromAccount = function() {
        return this.fromAccount;
    }, et.prototype.getFromAccountNick = function() {
        return this.fromAccountNick;
    }, et.prototype.getIsSend = function() {
        return this.isSend;
    }, et.prototype.getSeq = function() {
        return this.seq;
    }, et.prototype.getTime = function() {
        return this.time;
    }, et.prototype.getRandom = function() {
        return this.random;
    }, et.prototype.getElems = function() {
        return this.elems;
    }, et.prototype.getMsgUniqueId = function() {
        return this.uniqueId;
    }, et.prototype.addText = function(e) {
        this.addElem(new n.Msg.Elem(v.TEXT, e));
    }, et.prototype.addFace = function(e) {
        this.addElem(new n.Msg.Elem(v.FACE, e));
    }, et.prototype.addImage = function(e) {
        this.addElem(new n.Msg.Elem(v.IMAGE, e));
    }, et.prototype.addLocation = function(e) {
        this.addElem(new n.Msg.Elem(v.LOCATION, e));
    }, et.prototype.addFile = function(e) {
        this.addElem(new n.Msg.Elem(v.FILE, e));
    }, et.prototype.addCustom = function(e) {
        this.addElem(new n.Msg.Elem(v.CUSTOM, e));
    }, et.prototype.addElem = function(e) {
        this.elems.push(e);
    }, et.prototype.toHtml = function() {
        var e = "";
        for (var t in this.elems) e += this.elems[t].toHtml();
        return e;
    }, et.prototype.setOfflinePushInfo = function(e) {
        this.offlinePushInfo = e;
    }, (et.Elem = function(e, t) {
        this.type = e, this.content = t;
    }).prototype.getType = function() {
        return this.type;
    }, et.Elem.prototype.getContent = function() {
        return this.content;
    }, et.Elem.prototype.toHtml = function() {
        return this.content.toHtml();
    }, et.Elem.Text = function(e) {
        this.text = _e.xssFilter(e);
    }, et.Elem.Text.prototype.getText = function() {
        return this.text;
    }, et.Elem.Text.prototype.toHtml = function() {
        return this.text;
    }, et.Elem.Face = function(e, t) {
        this.index = e, this.data = t;
    }, et.Elem.Face.prototype.getIndex = function() {
        return this.index;
    }, et.Elem.Face.prototype.getData = function() {
        return this.data;
    }, et.Elem.Face.prototype.toHtml = function() {
        var e = null, t = ye[this.data], n = Me[t];
        return n && n[1] && (e = n[1]), e ? "<img src='" + e + "'/>" : this.data;
    }, et.Elem.Location = function(e, t, n) {
        this.latitude = t, this.longitude = e, this.desc = n;
    }, et.Elem.Location.prototype.getLatitude = function() {
        return this.latitude;
    }, et.Elem.Location.prototype.getLongitude = function() {
        return this.longitude;
    }, et.Elem.Location.prototype.getDesc = function() {
        return this.desc;
    }, et.Elem.Location.prototype.toHtml = function() {
        return "经度=" + this.longitude + ",纬度=" + this.latitude + ",描述=" + this.desc;
    }, et.Elem.Images = function(e, t) {
        this.UUID = e, "number" != typeof t && (t = parseInt(F[t] || F.UNKNOWN, 10)), this.ImageFormat = t, 
        this.ImageInfoArray = [];
    }, et.Elem.Images.prototype.addImage = function(e) {
        this.ImageInfoArray.push(e);
    }, et.Elem.Images.prototype.toHtml = function() {
        var e = this.getImage(S.SMALL), t = this.getImage(S.LARGE), n = this.getImage(S.ORIGIN);
        return t || (t = e), n || (n = e), "<img src='" + e.getUrl() + "#" + t.getUrl() + "#" + n.getUrl() + "' style='CURSOR: hand' id='" + this.getImageId() + "' bigImgUrl='" + t.getUrl() + "' onclick='imageClick(this)' />";
    }, et.Elem.Images.prototype.getImageId = function() {
        return this.UUID;
    }, et.Elem.Images.prototype.getImageFormat = function() {
        return this.ImageFormat;
    }, et.Elem.Images.prototype.getImage = function(e) {
        for (var t in this.ImageInfoArray) if (this.ImageInfoArray[t].getType() == e) return this.ImageInfoArray[t];
        var n = null;
        return this.ImageInfoArray.forEach(function(t) {
            t.getType() == e && (n = t);
        }), n;
    }, et.Elem.Images.Image = function(e, t, n, o, i) {
        this.type = e, this.size = t, this.width = n, this.height = o, this.url = i;
    }, et.Elem.Images.Image.prototype.getType = function() {
        return this.type;
    }, et.Elem.Images.Image.prototype.getSize = function() {
        return this.size;
    }, et.Elem.Images.Image.prototype.getWidth = function() {
        return this.width;
    }, et.Elem.Images.Image.prototype.getHeight = function() {
        return this.height;
    }, et.Elem.Images.Image.prototype.getUrl = function() {
        return this.url;
    }, et.Elem.Sound = function(e, t, n, o, i, r, s) {
        this.uuid = e, this.second = t, this.size = n, this.senderId = o, this.receiverId = i, 
        this.downFlag = r, this.busiId = s == A.C2C ? 2 : 1, void 0 !== this.downFlag && void 0 !== this.busiId ? Oe(e, o, 0, r, i, this.busiId, w.SOUND) : this.downUrl = function(e, t) {
            var n = null;
            return ue && se[0] ? n = "https://" + b + "/asn.com/stddownload_common_file?authkey=" + ue + "&bid=" + N + "&subbid=" + ae.sdkAppID + "&fileid=" + e + "&filetype=" + O + "&openid=" + t + "&ver=0" : Ee.error("拼接语音下载url不报错：ip或者authkey为空"), 
            n;
        }(e, o);
    }, et.Elem.Sound.prototype.getUUID = function() {
        return this.uuid;
    }, et.Elem.Sound.prototype.getSecond = function() {
        return this.second;
    }, et.Elem.Sound.prototype.getSize = function() {
        return this.size;
    }, et.Elem.Sound.prototype.getSenderId = function() {
        return this.senderId;
    }, et.Elem.Sound.prototype.getDownUrl = function() {
        return this.downUrl;
    }, et.Elem.Sound.prototype.toHtml = function() {
        return "ie" == a.type && parseInt(a.ver) <= 8 ? "[这是一条语音消息]demo暂不支持ie8(含)以下浏览器播放语音,语音URL:" + this.downUrl : '<audio id="uuid_' + this.uuid + '" src="' + this.downUrl + '" controls="controls" onplay="onChangePlayAudio(this)" preload="none"></audio>';
    }, et.Elem.File = function(e, t, n, o, i, r, s) {
        this.uuid = e, this.name = t, this.size = n, this.senderId = o, this.receiverId = i, 
        this.downFlag = r, this.busiId = s == A.C2C ? 2 : 1, void 0 !== r && void 0 !== busiId ? Oe(e, o, 0, r, i, this.busiId, w.FILE) : this.downUrl = be(e, o, t);
    }, et.Elem.File.prototype.getUUID = function() {
        return this.uuid;
    }, et.Elem.File.prototype.getName = function() {
        return this.name;
    }, et.Elem.File.prototype.getSize = function() {
        return this.size;
    }, et.Elem.File.prototype.getSenderId = function() {
        return this.senderId;
    }, et.Elem.File.prototype.getDownUrl = function() {
        return this.downUrl;
    }, et.Elem.File.prototype.getDownFlag = function() {
        return this.downFlag;
    }, et.Elem.File.prototype.toHtml = function() {
        var e, t;
        return e = this.size, t = "Byte", this.size >= 1024 && (e = Math.round(this.size / 1024), 
        t = "KB"), '<a href="javascript" onclick="webim.onDownFile("' + this.uuid + '")" title="点击下载文件" ><i class="glyphicon glyphicon-file">&nbsp;' + this.name + "(" + e + t + ")</i></a>";
    }, et.Elem.GroupTip = function(e, t, n, o, i, r) {
        this.opType = e, this.opUserId = t, this.groupId = n, this.groupName = o, this.userIdList = i || [], 
        this.groupInfoList = [], this.memberInfoList = [], this.groupMemberNum = null, this.userinfo = r || [];
    }, et.Elem.GroupTip.prototype.addGroupInfo = function(e) {
        this.groupInfoList.push(e);
    }, et.Elem.GroupTip.prototype.addMemberInfo = function(e) {
        this.memberInfoList.push(e);
    }, et.Elem.GroupTip.prototype.getOpType = function() {
        return this.opType;
    }, et.Elem.GroupTip.prototype.getOpUserId = function() {
        return this.opUserId;
    }, et.Elem.GroupTip.prototype.getGroupId = function() {
        return this.groupId;
    }, et.Elem.GroupTip.prototype.getGroupName = function() {
        return this.groupName;
    }, et.Elem.GroupTip.prototype.getUserIdList = function() {
        return this.userIdList;
    }, et.Elem.GroupTip.prototype.getUserInfo = function() {
        return this.userinfo;
    }, et.Elem.GroupTip.prototype.getGroupInfoList = function() {
        return this.groupInfoList;
    }, et.Elem.GroupTip.prototype.getMemberInfoList = function() {
        return this.memberInfoList;
    }, et.Elem.GroupTip.prototype.getGroupMemberNum = function() {
        return this.groupMemberNum;
    }, et.Elem.GroupTip.prototype.setGroupMemberNum = function(e) {
        return this.groupMemberNum = e;
    }, et.Elem.GroupTip.prototype.toHtml = function() {
        var e = "[群提示消息]";
        switch (this.opType) {
          case K.JOIN:
            for (var t in e += this.opUserId + "邀请了", this.userIdList) if (e += this.userIdList[t] + ",", 
            this.userIdList.length > 10 && 9 == t) {
                e += "等" + this.userIdList.length + "人";
                break;
            }
            e += "加入该群";
            break;

          case K.QUIT:
            e += this.opUserId + "主动退出该群";
            break;

          case K.KICK:
            for (var t in e += this.opUserId + "将", this.userIdList) if (e += this.userIdList[t] + ",", 
            this.userIdList.length > 10 && 9 == t) {
                e += "等" + this.userIdList.length + "人";
                break;
            }
            e += "踢出该群";
            break;

          case K.SET_ADMIN:
            for (var t in e += this.opUserId + "将", this.userIdList) if (e += this.userIdList[t] + ",", 
            this.userIdList.length > 10 && 9 == t) {
                e += "等" + this.userIdList.length + "人";
                break;
            }
            e += "设为管理员";
            break;

          case K.CANCEL_ADMIN:
            for (var t in e += this.opUserId + "取消", this.userIdList) if (e += this.userIdList[t] + ",", 
            this.userIdList.length > 10 && 9 == t) {
                e += "等" + this.userIdList.length + "人";
                break;
            }
            e += "的管理员资格";
            break;

          case K.MODIFY_GROUP_INFO:
            for (var t in e += this.opUserId + "修改了群资料：", this.groupInfoList) {
                var n = this.groupInfoList[t].getType(), o = this.groupInfoList[t].getValue();
                switch (n) {
                  case H.FACE_URL:
                    e += "群头像为" + o + "; ";
                    break;

                  case H.NAME:
                    e += "群名称为" + o + "; ";
                    break;

                  case H.OWNER:
                    e += "群主为" + o + "; ";
                    break;

                  case H.NOTIFICATION:
                    e += "群公告为" + o + "; ";
                    break;

                  case H.INTRODUCTION:
                    e += "群简介为" + o + "; ";
                    break;

                  default:
                    e += "未知信息为:type=" + n + ",value=" + o + "; ";
                }
            }
            break;

          case K.MODIFY_MEMBER_INFO:
            for (var t in e += this.opUserId + "修改了群成员资料:", this.memberInfoList) {
                var i = this.memberInfoList[t].getUserId(), r = this.memberInfoList[t].getShutupTime();
                if (e += i + ": ", e += null != r && void 0 !== r ? 0 == r ? "取消禁言; " : "禁言" + r + "秒; " : " shutupTime为空", 
                this.memberInfoList.length > 10 && 9 == t) {
                    e += "等" + this.memberInfoList.length + "人";
                    break;
                }
            }
            break;

          case K.READED:
            Log.info("消息已读同步");
            break;

          default:
            e += "未知群提示消息类型：type=" + this.opType;
        }
        return e;
    }, et.Elem.GroupTip.GroupInfo = function(e, t) {
        this.type = e, this.value = t;
    }, et.Elem.GroupTip.GroupInfo.prototype.getType = function() {
        return this.type;
    }, et.Elem.GroupTip.GroupInfo.prototype.getValue = function() {
        return this.value;
    }, et.Elem.GroupTip.MemberInfo = function(e, t) {
        this.userId = e, this.shutupTime = t;
    }, et.Elem.GroupTip.MemberInfo.prototype.getUserId = function() {
        return this.userId;
    }, et.Elem.GroupTip.MemberInfo.prototype.getShutupTime = function() {
        return this.shutupTime;
    }, et.Elem.Custom = function(e, t, n) {
        this.data = e, this.desc = t, this.ext = n;
    }, et.Elem.Custom.prototype.getData = function() {
        return this.data;
    }, et.Elem.Custom.prototype.getDesc = function() {
        return this.desc;
    }, et.Elem.Custom.prototype.getExt = function() {
        return this.ext;
    }, et.Elem.Custom.prototype.toHtml = function() {
        return this.data;
    };
    var tt = new function() {
        var e = {}, n = [];
        t = {}, this.cookie = "", this.syncFlag = 0;
        var o = function(t) {
            for (var n in e) t(e[n]);
        };
        this.sessMap = function() {
            return e;
        }, this.sessCount = function() {
            return n.length;
        }, this.sessByTypeId = function(t, n) {
            var o = Qe.skey(t, n);
            return void 0 === o || null == o ? null : e[o];
        }, this.delSessByTypeId = function(n, o) {
            var i = Qe.skey(n, o);
            return void 0 !== i && null != i && (e[i] && (delete e[i], delete t[i]), !0);
        }, this.resetCookieAndSyncFlag = function() {
            this.cookie = "", this.syncFlag = 0;
        }, this.setAutoRead = function(e, t, n) {
            if (n && o(function(e) {
                e._impl.isAutoRead = !1;
            }), e && (e._impl.isAutoRead = t, t)) if (e._impl.unread = 0, e._impl.type == A.C2C) {
                var i = [];
                i.push(new Ze(e._impl.id, e._impl.time)), Be(tt.cookie, i, function(e) {
                    Ee.info("[setAutoRead]: c2CMsgReaded success");
                }, function(e) {
                    Ee.error("[setAutoRead}: c2CMsgReaded failed:" + e.ErrorInfo);
                });
            } else if (e._impl.type == A.GROUP) {
                var r = {
                    GroupId: e._impl.id,
                    MsgReadedSeq: e._impl.curMaxMsgSeq
                };
                He(r, function(e) {
                    Ee.info("groupMsgReaded success");
                }, function(e) {
                    Ee.error("groupMsgReaded failed:" + e.ErrorInfo);
                });
            }
        }, this.c2CMsgReaded = function(e, t, n) {
            var o = [];
            o.push(new Ze(e.To_Account, e.LastedMsgTime)), Be(tt.cookie, o, function(e) {
                t && (Ee.info("c2CMsgReaded success"), t(e));
            }, function(e) {
                n && (Ee.error("c2CMsgReaded failed:" + e.ErrorInfo), n(e));
            });
        }, this.addSession = function(t) {
            e[t._impl.skey] = t;
        }, this.delSession = function(t) {
            delete e[t._impl.skey];
        }, this.clear = function() {
            e = {}, n = [], t = {}, this.cookie = "", this.syncFlag = 0;
        }, this.addMsg = function(n, o) {
            if (function(e) {
                var n = !1, o = e.sess._impl.skey, i = e.isSend + e.seq + e.random;
                return t[o] && t[o][i] && (n = !0), t[o] ? t[o][i] = {
                    time: e.time
                } : (t[o] = {}, t[o][i] = {
                    time: e.time
                }), n;
            }(n)) return !1;
            var i = n.sess;
            return e[i._impl.skey] || this.addSession(i), i._impl_addMsg(n, o), !0;
        }, this.updateTimeline = function() {
            var e = new Array();
            o(function(t) {
                e.push(t);
            }), e.sort(function(e, t) {
                return t.time - e.time;
            }), n = e;
        };
    }(), nt = new function() {
        var e = null, t = null, n = {
            1: null,
            2: null,
            3: null,
            4: null,
            5: null,
            6: null,
            7: null,
            8: null,
            9: null,
            10: null,
            11: null,
            15: null,
            255: null,
            12: null
        }, o = {
            1: null,
            2: null,
            3: null,
            4: null,
            5: null,
            6: null,
            7: null,
            8: null
        }, i = {
            1: null
        }, r = null, s = !1, u = 0, a = 0, c = null, f = !1, g = {}, d = 90, m = null, h = {}, y = {
            92: null,
            96: null
        }, M = {}, _ = {};
        this.setLongPollingOn = function(e) {
            s = e;
        }, this.getLongPollingOn = function() {
            return s;
        }, this.resetLongPollingInfo = function() {
            s = !1, u = 0, a = 0;
        }, this.setBigGroupLongPollingOn = function(e) {
            f = e;
        }, this.checkBigGroupLongPollingOn = function(e) {
            return !!m[e];
        }, this.setBigGroupLongPollingKey = function(e, t) {
            m[e] = t;
        }, this.resetBigGroupLongPollingInfo = function(e) {
            f = !1, g[e] = 0, m[e] = null, h[e] = {};
        }, this.setBigGroupLongPollingMsgMap = function(e, t) {
            var n = h[e];
            n ? (n = parseInt(n) + t, h[e] = n) : h[e] = t;
        }, this.clear = function() {
            t = null, n = {
                1: null,
                2: null,
                3: null,
                4: null,
                5: null,
                6: null,
                7: null,
                8: null,
                9: null,
                10: null,
                11: null,
                15: null,
                255: null,
                12: null
            }, o = {
                1: null,
                2: null,
                3: null,
                4: null,
                5: null,
                6: null,
                7: null,
                8: null
            }, i = {
                1: null
            }, e = null, s = !1, u = 0, a = 0, c = null, f = !1, g = {}, m = {}, h = {}, _ = {}, 
            se = [], ue = null, null;
        };
        var E = function(e, t) {
            !function(e, t) {
                Fe(t, !0) && We.apiCall(l, "authkey", {}, e, t);
            }(function(t) {
                se = t.IpList, ue = t.AuthKey, t.ExpireTime, e && e(t);
            }, function(e) {
                Ee.error("initIpAndAuthkey failed:" + e.ErrorInfo), t && t(e);
            });
        }, T = function(e, t) {
            var n = M[e];
            n ? t > n && (M[e] = t) : M[e] = t;
        }, S = function(e, t) {
            for (var n in e) {
                var o = e[n];
                if (o.From_Account) {
                    var i = oe(o, !1, !0);
                    i && t.push(i), T(o.ToGroupId, o.MsgSeq);
                }
            }
            return t;
        }, F = function(t, n) {
            var o = {}, i = [];
            for (var r in n) {
                var s = o[n[r].ToGroupId];
                s || (s = o[n[r].ToGroupId] = {
                    min: 99999999,
                    max: -1,
                    msgs: []
                }), n[r].NoticeSeq > a && (Ee.warn("noticeSeq=" + a + ",msgNoticeSeq=" + n[r].NoticeSeq), 
                a = n[r].NoticeSeq), n[r].Event = t, o[n[r].ToGroupId].msgs.push(n[r]), n[r].MsgSeq < s.min && (o[n[r].ToGroupId].min = n[r].MsgSeq), 
                n[r].MsgSeq > s.max && (o[n[r].ToGroupId].max = n[r].MsgSeq);
            }
            for (var u in o) i = S(o[u].msgs, i);
            i.length && tt.updateTimeline(), e && i.length && e(i);
        }, G = function(t, n) {
            var o = {}, i = [];
            for (var r in n) {
                var s = o[n[r].ToGroupId];
                s || (s = o[n[r].ToGroupId] = {
                    min: 99999999,
                    max: -1,
                    msgs: []
                }), n[r].NoticeSeq > a && (Ee.warn("noticeSeq=" + a + ",msgNoticeSeq=" + n[r].NoticeSeq), 
                a = n[r].NoticeSeq), n[r].Event = t, o[n[r].ToGroupId].msgs.push(n[r]), n[r].MsgSeq < s.min && (o[n[r].ToGroupId].min = n[r].MsgSeq), 
                n[r].MsgSeq > s.max && (o[n[r].ToGroupId].max = n[r].MsgSeq);
            }
            for (var u in o) i = S(o[u].msgs, i);
            i.length && tt.updateTimeline(), e && i.length && e(i);
        }, N = function(e, t) {
            for (var o in e) {
                var i = e[o], r = i.MsgBody, s = r.ReportType;
                if (0 == t && i.NoticeSeq && i.NoticeSeq > a && (a = i.NoticeSeq), i.GroupInfo.To_Account, 
                t) {
                    var u = i.ToGroupId + "_" + s + "_" + r.Operator_Account;
                    if (_[u]) {
                        Ee.warn("收到重复的群系统消息：key=" + u);
                        continue;
                    }
                    _[u] = !0;
                }
                var c = {
                    SrcFlag: 0,
                    ReportType: s,
                    GroupId: i.ToGroupId,
                    GroupName: i.GroupInfo.GroupName,
                    Operator_Account: r.Operator_Account,
                    MsgTime: i.MsgTimeStamp,
                    groupReportTypeMsg: r
                };
                switch (s) {
                  case J.JOIN_GROUP_REQUEST:
                    c.RemarkInfo = r.RemarkInfo, c.MsgKey = r.MsgKey, c.Authentication = r.Authentication, 
                    c.UserDefinedField = i.UserDefinedField, c.From_Account = i.From_Account, c.MsgSeq = i.ClientSeq, 
                    c.MsgRandom = i.MsgRandom;
                    break;

                  case J.JOIN_GROUP_ACCEPT:
                  case J.JOIN_GROUP_REFUSE:
                    c.RemarkInfo = r.RemarkInfo;
                    break;

                  case J.KICK:
                  case J.DESTORY:
                  case J.CREATE:
                  case J.INVITED_JOIN_GROUP_REQUEST:
                  case J.INVITED_JOIN_GROUP_REQUEST_AGREE:
                  case J.QUIT:
                  case J.SET_ADMIN:
                  case J.CANCEL_ADMIN:
                  case J.REVOKE:
                  case J.READED:
                    break;

                  case J.CUSTOM:
                    c.MsgSeq = i.MsgSeq, c.UserDefinedField = r.UserDefinedField;
                    break;

                  default:
                    Ee.error("未知群系统消息类型：reportType=" + s);
                }
                if (t) n[s] ? n[s](c) : Ee.error("未知群系统消息类型：reportType=" + s); else if (n[s]) if (s == J.READED) for (var l = c.groupReportTypeMsg.GroupReadInfoArray, p = 0, f = l.length; p < f; p++) {
                    var g = l[p];
                    n[s](g);
                } else n[s](c);
            }
        }, b = function(e, t) {
            var n, i, r;
            for (var s in e) {
                switch (i = (n = e[s]).PushType, 0 == t && n.NoticeSeq && n.NoticeSeq > a && (a = n.NoticeSeq), 
                r = {
                    Type: i
                }, i) {
                  case z.FRIEND_ADD:
                    r.Accounts = n.FriendAdd_Account;
                    break;

                  case z.FRIEND_DELETE:
                    r.Accounts = n.FriendDel_Account;
                    break;

                  case z.PENDENCY_ADD:
                    r.PendencyList = n.PendencyAdd;
                    break;

                  case z.PENDENCY_DELETE:
                    r.Accounts = n.FrienPencydDel_Account;
                    break;

                  case z.BLACK_LIST_ADD:
                    r.Accounts = n.BlackListAdd_Account;
                    break;

                  case z.BLACK_LIST_DELETE:
                    r.Accounts = n.BlackListDel_Account;
                    break;

                  default:
                    Ee.error("未知好友系统通知类型：friendNotice=" + JSON.stringify(n));
                }
                t ? i == z.PENDENCY_ADD && o[i] && o[i](r) : o[i] && o[i](r);
            }
        }, O = function(e, t) {
            var n, o, r;
            for (var s in e) {
                switch (o = (n = e[s]).PushType, 0 == t && n.NoticeSeq && n.NoticeSeq > a && (a = n.NoticeSeq), 
                r = {
                    Type: o
                }, o) {
                  case V:
                    r.Profile_Account = n.Profile_Account, r.ProfileList = n.ProfileList;
                    break;

                  default:
                    Ee.error("未知资料系统通知类型：profileNotice=" + JSON.stringify(n));
                }
                t ? o == V && i[o] && i[o](r) : i[o] && i[o](r);
            }
        }, R = function(e) {
            var t = e.MsgBody, o = t.ReportType, i = (e.GroupInfo.To_Account, {
                SrcFlag: 1,
                ReportType: o,
                GroupId: e.ToGroupId,
                GroupName: e.GroupInfo.GroupName,
                Operator_Account: t.Operator_Account,
                MsgTime: e.MsgTimeStamp
            });
            switch (o) {
              case J.JOIN_GROUP_REQUEST:
                i.RemarkInfo = t.RemarkInfo, i.MsgKey = t.MsgKey, i.Authentication = t.Authentication, 
                i.UserDefinedField = e.UserDefinedField, i.From_Account = e.From_Account, i.MsgSeq = e.ClientSeq, 
                i.MsgRandom = e.MsgRandom;
                break;

              case J.JOIN_GROUP_ACCEPT:
              case J.JOIN_GROUP_REFUSE:
                i.RemarkInfo = t.RemarkInfo;
                break;

              case J.KICK:
              case J.DESTORY:
              case J.CREATE:
              case J.INVITED_JOIN_GROUP_REQUEST:
              case J.INVITED_JOIN_GROUP_REQUEST_AGREE:
              case J.QUIT:
              case J.SET_ADMIN:
              case J.CANCEL_ADMIN:
              case J.REVOKE:
                break;

              case J.CUSTOM:
                i.MsgSeq = e.MsgSeq, i.UserDefinedField = t.UserDefinedField;
                break;

              default:
                Ee.error("未知群系统消息类型：reportType=" + o);
            }
            n[o] && n[o](i);
        }, w = function(e) {
            for (var t = 0, n = e.length; t < n; t++) L(e[t]);
        }, L = function(e) {
            var t = e.SubMsgType;
            switch (t) {
              case k:
                if (Ee.warn("C2C已读消息通知"), e.ReadC2cMsgNotify && e.ReadC2cMsgNotify.UinPairReadArray && y[t]) for (var n = 0, o = e.ReadC2cMsgNotify.UinPairReadArray.length; n < o; n++) {
                    var i = e.ReadC2cMsgNotify.UinPairReadArray[n];
                    y[t](i);
                }
                break;

              case D:
                Ee.warn("多终端互踢通知"), ke("instance"), y[t] && y[t]();
                break;

              default:
                Ee.error("未知C2c系统消息：subType=" + t);
            }
        };
        this.longPolling = function(e, t) {
            function n() {
                De(o, function(e) {
                    for (var t in e.EventArray) {
                        var n = e.EventArray[t];
                        switch (n.Event) {
                          case P.C2C:
                            u = n.NotifySeq, Ee.warn("longpolling: received new c2c msg"), nt.syncMsgs();
                            break;

                          case P.GROUP_COMMON:
                            Ee.warn("longpolling: received new group msgs"), G(n.Event, n.GroupMsgArray);
                            break;

                          case P.GROUP_TIP:
                          case P.GROUP_TIP2:
                            Ee.warn("longpolling: received new group tips"), G(n.Event, n.GroupTips);
                            break;

                          case P.GROUP_SYSTEM:
                            Ee.warn("longpolling: received new group system msgs"), N(n.GroupTips, !1);
                            break;

                          case P.FRIEND_NOTICE:
                            Ee.warn("longpolling: received new friend system notice"), b(n.FriendListMod, !1);
                            break;

                          case P.PROFILE_NOTICE:
                            Ee.warn("longpolling: received new profile system notice"), O(n.ProfileDataMod, !1);
                            break;

                          case P.C2C_COMMON:
                            a = n.C2cMsgArray[0].NoticeSeq, Ee.warn("longpolling: received new c2c_common msg", a), 
                            F(n.Event, n.C2cMsgArray);
                            break;

                          case P.C2C_EVENT:
                            a = n.C2cNotifyMsgArray[0].NoticeSeq, Ee.warn("longpolling: received new c2c_event msg"), 
                            w(n.C2cNotifyMsgArray);
                            break;

                          default:
                            Ee.error("longpolling收到未知新消息类型: Event=" + n.Event);
                        }
                    }
                    var o = {
                        ActionStatus: C.OK,
                        ErrorCode: 0
                    };
                    te(o);
                }, function(e) {
                    te(e), t && t(e);
                });
            }
            var o = {
                Timeout: Z / 1e3,
                Cookie: {
                    NotifySeq: u,
                    NoticeSeq: a
                }
            };
            $ ? (o.Cookie.LongPollingId = $, n()) : Xe(0, function(e) {
                $ = o.Cookie.LongPollingId = e.LongPollingId, Z = e.Timeout > 60 ? Z : 1e3 * e.Timeout, 
                n();
            });
        }, this.bigGroupLongPolling = function(e, t, n) {
            !function(e, t, n, o) {
                We.apiCall(I, "get_msg", e, t, n, o);
            }({
                USP: 1,
                StartSeq: g[e],
                HoldTime: d,
                Key: m[e]
            }, function(n) {
                var o = [];
                if (g[e] = n.NextSeq, d = n.HoldTime, m[e] = n.Key, n.RspMsgList && n.RspMsgList.length > 0) {
                    for (var i, r, s, u = 0, a = n.RspMsgList.length - 1; a >= 0; a--) {
                        i = n.RspMsgList[a];
                        if (!(i = _e.replaceObject({
                            F_Account: "From_Account",
                            T_Account: "To_Account",
                            FAType: "EnumFrom_AccountType",
                            TAType: "EnumTo_AccountType",
                            GCode: "GroupCode",
                            GName: "GroupName",
                            GId: "GroupId",
                            MFlg: "MsgFlag",
                            FAEInfo: "MsgFrom_AccountExtraInfo",
                            Evt: "Event",
                            GInfo: "GroupInfo",
                            BPlc: "IsPlaceMsg",
                            MBody: "MsgBody",
                            Pri: "MsgPriority",
                            Rdm: "MsgRandom",
                            MSeq: "MsgSeq",
                            TStp: "MsgTimeStamp",
                            TGId: "ToGroupId",
                            UEInfo: "UinExtInfo",
                            UId: "UserId",
                            BSys: "IsSystemMsg",
                            FAHUrl: "From_AccountHeadurl",
                            FANick: "From_AccountNick"
                        }, i)).IsPlaceMsg && i.From_Account && i.MsgBody && 0 != i.MsgBody.length) switch (r = i.Event) {
                          case P.GROUP_COMMON:
                            Ee.info("bigGroupLongPolling: return new group msg"), (s = oe(i, !1, !1)) && o.push(s), 
                            u += 1;
                            break;

                          case P.GROUP_TIP:
                          case P.GROUP_TIP2:
                            Ee.info("bigGroupLongPolling: return new group tip"), (s = oe(i, !1, !1)) && o.push(s);
                            break;

                          case P.GROUP_SYSTEM:
                            Ee.info("bigGroupLongPolling: new group system msg"), R(i);
                            break;

                          default:
                            Ee.error("bigGroupLongPolling收到未知新消息类型: Event=" + r);
                        }
                    }
                    u > 0 && (nt.setBigGroupLongPollingMsgMap(i.ToGroupId, u), Ee.warn("current bigGroupLongPollingMsgMap: " + JSON.stringify(h)));
                }
                ee = 0;
                var l = {
                    ActionStatus: C.OK,
                    ErrorCode: Y.ON,
                    ErrorInfo: "connection is ok..."
                };
                We.callBack(l), t ? t(o) : c && c(o), f && nt.bigGroupLongPolling(e);
            }, function(t) {
                if (10018 == t.ErrorCode ? g[e] = 0 : 60008 != t.ErrorCode && (Ee.error(t.ErrorInfo), 
                ee++), 91101 == t.ErrorCode && (Ee.error("多实例登录，被kick"), r && r()), ee < 10) f && nt.bigGroupLongPolling(e); else {
                    var o = {
                        ActionStatus: C.FAIL,
                        ErrorCode: Y.OFF,
                        ErrorInfo: "connection is off"
                    };
                    We.callBack(o);
                }
                n && n(t);
            }, 1e3 * d);
        };
        var te = function(e) {
            if (0 == e.ErrorCode || 60008 == e.ErrorCode) {
                Q = 0, W = !1;
                var t, n = !1;
                switch (j) {
                  case Y.INIT:
                    n = !0, j = Y.ON, t = "create connection successfully(INIT->ON)";
                    break;

                  case Y.ON:
                    t = "connection is on...(ON->ON)";
                    break;

                  case Y.RECONNECT:
                    j = Y.ON, t = "connection is on...(RECONNECT->ON)";
                    break;

                  case Y.OFF:
                    n = !0, j = Y.RECONNECT, t = "reconnect successfully(OFF->RECONNECT)";
                }
                var o = {
                    ActionStatus: C.OK,
                    ErrorCode: j,
                    ErrorInfo: t
                };
                n && We.callBack(o), s && nt.longPolling();
            } else if (91101 == e.ErrorCode) Ee.error("多实例登录，被kick"), r && r(); else if (Q++, 
            Ee.warn("longPolling接口第" + Q + "次报错: " + e.ErrorInfo), Q <= 10) setTimeout(ne, 100); else {
                j = Y.OFF;
                var i = {
                    ActionStatus: C.FAIL,
                    ErrorCode: Y.OFF,
                    ErrorInfo: "connection is off"
                };
                0 == W && We.callBack(i), W = !0, Ee.warn("5000毫秒之后,SDK会发起新的longPolling请求..."), 
                setTimeout(ne, 5e3);
            }
        }, ne = (F = function(t, n) {
            var o, i = [];
            for (var r in o = n) {
                var s, u, a = o[r], c = a.From_AccountHeadurl || "";
                a.From_Account == ae.identifier ? (s = !0, u = a.To_Account) : (s = !1, u = a.From_Account);
                var l = tt.sessByTypeId(A.C2C, u);
                l || (l = new Qe(A.C2C, u, u, c, 0, 0));
                var p = new et(l, s, a.MsgSeq, a.MsgRandom, a.MsgTimeStamp, a.From_Account, U.COMMON, a.From_AccountNick, c), f = null, g = null, d = null;
                for (var m in a.MsgBody) {
                    switch (d = (f = a.MsgBody[m]).MsgType) {
                      case v.TEXT:
                        g = new et.Elem.Text(f.MsgContent.Text);
                        break;

                      case v.FACE:
                        g = new et.Elem.Face(f.MsgContent.Index, f.MsgContent.Data);
                        break;

                      case v.IMAGE:
                        for (var h in g = new et.Elem.Images(f.MsgContent.UUID, f.MsgContent.ImageFormat || ""), 
                        f.MsgContent.ImageInfoArray) {
                            var I = f.MsgContent.ImageInfoArray[h];
                            g.addImage(new et.Elem.Images.Image(I.Type, I.Size, I.Width, I.Height, I.URL));
                        }
                        break;

                      case v.SOUND:
                        f.MsgContent ? g = new et.Elem.Sound(f.MsgContent.UUID, f.MsgContent.Second, f.MsgContent.Size, a.From_Account, a.To_Account, f.MsgContent.Download_Flag, A.C2C) : (d = v.TEXT, 
                        g = new et.Elem.Text("[语音消息]下载地址解析出错"));
                        break;

                      case v.LOCATION:
                        g = new et.Elem.Location(f.MsgContent.Longitude, f.MsgContent.Latitude, f.MsgContent.Desc);
                        break;

                      case v.FILE:
                      case v.FILE + " ":
                        d = v.FILE, f.MsgContent ? g = new et.Elem.File(f.MsgContent.UUID, f.MsgContent.FileName, f.MsgContent.FileSize, a.From_Account, a.To_Account, f.MsgContent.Download_Flag, A.C2C) : (d = v.TEXT, 
                        g = new et.Elem.Text("[文件消息下载地址解析出错]"));
                        break;

                      case v.CUSTOM:
                        try {
                            var y = JSON.parse(f.MsgContent.Data);
                            if (y && y.userAction && y.userAction == X) continue;
                        } catch (e) {}
                        d = v.CUSTOM, g = new et.Elem.Custom(f.MsgContent.Data, f.MsgContent.Desc, f.MsgContent.Ext);
                        break;

                      default:
                        d = v.TEXT, g = new et.Elem.Text("web端暂不支持" + f.MsgType + "消息");
                    }
                    p.elems.push(new et.Elem(d, g));
                }
                p.elems.length > 0 && tt.addMsg(p, !0) && i.push(p);
            }
            i.length > 0 && tt.updateTimeline(), i.length > 0 && e && e(i);
        }, function() {
            s && nt.longPolling();
        });
        this.syncMsgs = function(t, n) {
            var o = [], i = [];
            qe(tt.cookie, tt.syncFlag, function(n) {
                for (var r in 2 == n.SyncFlag && (tt.syncFlag = 0), i = n.MsgList, tt.cookie = n.Cookie, 
                i) {
                    var s, u, a, c = i[r];
                    c.From_Account == ae.identifier ? (s = !0, u = c.To_Account, a = "") : (s = !1, 
                    u = c.From_Account, a = "");
                    var l = tt.sessByTypeId(A.C2C, u);
                    l || (l = new Qe(A.C2C, u, u, a, 0, 0));
                    var p = new et(l, s, c.MsgSeq, c.MsgRandom, c.MsgTimeStamp, c.From_Account, U.COMMON, c.From_AccountNick, c.From_AccountHeadurl), f = null, g = null, d = null;
                    for (var m in c.MsgBody) {
                        switch (d = (f = c.MsgBody[m]).MsgType) {
                          case v.TEXT:
                            g = new et.Elem.Text(f.MsgContent.Text);
                            break;

                          case v.FACE:
                            g = new et.Elem.Face(f.MsgContent.Index, f.MsgContent.Data);
                            break;

                          case v.IMAGE:
                            for (var h in g = new et.Elem.Images(f.MsgContent.UUID, f.MsgContent.ImageFormat), 
                            f.MsgContent.ImageInfoArray) {
                                var I = f.MsgContent.ImageInfoArray[h];
                                g.addImage(new et.Elem.Images.Image(I.Type, I.Size, I.Width, I.Height, I.URL));
                            }
                            break;

                          case v.SOUND:
                            f.MsgContent ? g = new et.Elem.Sound(f.MsgContent.UUID, f.MsgContent.Second, f.MsgContent.Size, c.From_Account, c.To_Account, f.MsgContent.Download_Flag, A.C2C) : (d = v.TEXT, 
                            g = new et.Elem.Text("[语音消息]下载地址解析出错"));
                            break;

                          case v.LOCATION:
                            g = new et.Elem.Location(f.MsgContent.Longitude, f.MsgContent.Latitude, f.MsgContent.Desc);
                            break;

                          case v.FILE:
                          case v.FILE + " ":
                            d = v.FILE, f.MsgContent ? g = new et.Elem.File(f.MsgContent.UUID, f.MsgContent.FileName, f.MsgContent.FileSize, c.From_Account, c.To_Account, f.MsgContent.Download_Flag, A.C2C) : (d = v.TEXT, 
                            g = new et.Elem.Text("[文件消息下载地址解析出错]"));
                            break;

                          case v.CUSTOM:
                            try {
                                var y = JSON.parse(f.MsgContent.Data);
                                if (y && y.userAction && y.userAction == X) continue;
                            } catch (e) {}
                            d = v.CUSTOM, g = new et.Elem.Custom(f.MsgContent.Data, f.MsgContent.Desc, f.MsgContent.Ext);
                            break;

                          default:
                            d = v.TEXT, g = new et.Elem.Text("web端暂不支持" + f.MsgType + "消息");
                        }
                        p.elems.push(new et.Elem(d, g));
                    }
                    p.elems.length > 0 && tt.addMsg(p, !0) && o.push(p);
                }
                (function(e) {
                    for (var t in e) {
                        var n = e[t];
                        switch (N(n.GroupTips, !0), n.Event) {
                          case P.GROUP_SYSTEM:
                            Ee.warn("handlerApplyJoinGroupSystemMsgs： handler new group system msg"), N(n.GroupTips, !0);
                            break;

                          default:
                            Ee.error("syncMsgs收到未知的群系统消息类型: Event=" + n.Event);
                        }
                    }
                })(n.EventArray), o.length > 0 && tt.updateTimeline(), t ? t(o) : o.length > 0 && e && e(o);
            }, function(e) {
                Ee.error("getMsgs failed:" + e.ErrorInfo), n && n(e);
            });
        }, this.getC2CHistoryMsgs = function(e, t, n) {
            if (e.Peer_Account || !n) if (e.MaxCnt || (e.MaxCnt = 15), e.MaxCnt <= 0 && n) n(_e.getReturnError("MaxCnt should be greater than 0", -14)); else if (e.MaxCnt > 15) {
                if (n) return void n(_e.getReturnError("MaxCnt can not be greater than 15", -15));
            } else {
                null != e.MsgKey && void 0 !== e.MsgKey || (e.MsgKey = "");
                var o = {
                    Peer_Account: e.Peer_Account,
                    MaxCnt: e.MaxCnt,
                    LastMsgTime: e.LastMsgTime,
                    MsgKey: e.MsgKey
                };
                xe(o, function(n) {
                    var o, i = [];
                    o = n.MsgList;
                    var r = tt.sessByTypeId(A.C2C, e.Peer_Account);
                    for (var s in r || (r = new Qe(A.C2C, e.Peer_Account, e.Peer_Account, "", 0, 0)), 
                    o) {
                        var u, a = o[s], c = a.From_AccountHeadurl || "";
                        a.From_Account == ae.identifier ? (u = !0, a.To_Account) : (u = !1, a.From_Account);
                        var l = new et(r, u, a.MsgSeq, a.MsgRandom, a.MsgTimeStamp, a.From_Account, U.COMMON, a.From_AccountNick, c), p = null, f = null, g = null;
                        for (var d in a.MsgBody) {
                            switch (g = (p = a.MsgBody[d]).MsgType) {
                              case v.TEXT:
                                f = new et.Elem.Text(p.MsgContent.Text);
                                break;

                              case v.FACE:
                                f = new et.Elem.Face(p.MsgContent.Index, p.MsgContent.Data);
                                break;

                              case v.IMAGE:
                                for (var m in f = new et.Elem.Images(p.MsgContent.UUID, p.MsgContent.ImageFormat), 
                                p.MsgContent.ImageInfoArray) {
                                    var h = p.MsgContent.ImageInfoArray[m];
                                    f.addImage(new et.Elem.Images.Image(h.Type, h.Size, h.Width, h.Height, h.URL));
                                }
                                break;

                              case v.SOUND:
                                p.MsgContent ? f = new et.Elem.Sound(p.MsgContent.UUID, p.MsgContent.Second, p.MsgContent.Size, a.From_Account, a.To_Account, p.MsgContent.Download_Flag, A.C2C) : (g = v.TEXT, 
                                f = new et.Elem.Text("[语音消息]下载地址解析出错"));
                                break;

                              case v.LOCATION:
                                f = new et.Elem.Location(p.MsgContent.Longitude, p.MsgContent.Latitude, p.MsgContent.Desc);
                                break;

                              case v.FILE:
                              case v.FILE + " ":
                                g = v.FILE, p.MsgContent ? f = new et.Elem.File(p.MsgContent.UUID, p.MsgContent.FileName, p.MsgContent.FileSize, a.From_Account, a.To_Account, p.MsgContent.Download_Flag, A.C2C) : (g = v.TEXT, 
                                f = new et.Elem.Text("[文件消息下载地址解析出错]"));
                                break;

                              case v.CUSTOM:
                                g = v.CUSTOM, f = new et.Elem.Custom(p.MsgContent.Data, p.MsgContent.Desc, p.MsgContent.Ext);
                                break;

                              default:
                                g = v.TEXT, f = new et.Elem.Text("web端暂不支持" + p.MsgType + "消息");
                            }
                            l.elems.push(new et.Elem(g, f));
                        }
                        tt.addMsg(l), i.push(l);
                    }
                    if (tt.updateTimeline(), t) {
                        var I = {
                            Complete: n.Complete,
                            MsgCount: i.length,
                            LastMsgTime: n.LastMsgTime,
                            MsgKey: n.MsgKey,
                            MsgList: i
                        };
                        r.isFinished(n.Complete), t(I);
                    }
                }, function(e) {
                    Ee.error("getC2CHistoryMsgs failed:" + e.ErrorInfo), n && n(e);
                });
            } else n(_e.getReturnError("Peer_Account is empty", -13));
        }, this.syncGroupMsgs = function(t, n, o) {
            if (t.ReqMsgSeq <= 0) {
                if (o) {
                    var i = _e.getReturnError("ReqMsgSeq must be greater than 0", -16);
                    o(i);
                }
            } else !function(e, t, n) {
                Fe(n, !0) && We.apiCall(p, "group_msg_get", {
                    GroupId: e.GroupId,
                    ReqMsgSeq: e.ReqMsgSeq,
                    ReqMsgNumber: e.ReqMsgNumber
                }, t, n);
            }({
                GroupId: t.GroupId,
                ReqMsgSeq: t.ReqMsgSeq,
                ReqMsgNumber: t.ReqMsgNumber
            }, function(t) {
                var o = [], i = (t.GroupId, t.RspMsgList), r = t.IsFinished;
                if (null != i && void 0 !== i) {
                    for (var s = i.length - 1; s >= 0; s--) {
                        var u = i[s];
                        if (!u.IsPlaceMsg && u.From_Account && u.MsgBody && 0 != u.MsgBody.length) {
                            var a = oe(u, !0, !0, r);
                            a && o.push(a);
                        }
                    }
                    o.length > 0 && tt.updateTimeline(), n ? n(o) : o.length > 0 && e && e(o);
                } else n && n([]);
            }, function(e) {
                Ee.error("getGroupMsgs failed:" + e.ErrorInfo), o && o(e);
            });
        };
        var oe = function(e, n, o, i) {
            if (e.IsPlaceMsg || !e.From_Account || !e.MsgBody || 0 == e.MsgBody.length) return null;
            var r, s, u, a, c = e.ToGroupId, l = c;
            e.GroupInfo && e.GroupInfo.GroupName && (l = e.GroupInfo.GroupName), u = e.From_Account, 
            e.GroupInfo && (e.GroupInfo.From_AccountNick && (u = e.GroupInfo.From_AccountNick), 
            a = e.GroupInfo.From_AccountHeadurl ? e.GroupInfo.From_AccountHeadurl : null), e.From_Account == ae.identifier ? (r = !0, 
            e.From_Account, s = "") : (r = !1, e.From_Account, s = "");
            var p = tt.sessByTypeId(A.GROUP, c);
            p || (p = new Qe(A.GROUP, c, l, s, 0, 0)), void 0 !== i && p.isFinished(i || 0);
            var f = q.COMMON;
            if (P.GROUP_TIP == e.Event || P.GROUP_TIP2 == e.Event) {
                f = q.TIP;
                var g = e.MsgBody;
                e.MsgBody = [], e.MsgBody.push({
                    MsgType: v.GROUP_TIP,
                    MsgContent: g
                });
            } else e.MsgPriority && (e.MsgPriority == B ? f = q.REDPACKET : e.MsgPriority == x && (f = q.LOVEMSG));
            var d = new et(p, r, e.MsgSeq, e.MsgRandom, e.MsgTimeStamp, e.From_Account, f, u, a), m = null, h = null, I = null;
            for (var y in e.MsgBody) {
                switch (I = (m = e.MsgBody[y]).MsgType) {
                  case v.TEXT:
                    h = new et.Elem.Text(m.MsgContent.Text);
                    break;

                  case v.FACE:
                    h = new et.Elem.Face(m.MsgContent.Index, m.MsgContent.Data);
                    break;

                  case v.IMAGE:
                    for (var M in h = new et.Elem.Images(m.MsgContent.UUID, m.MsgContent.ImageFormat || ""), 
                    m.MsgContent.ImageInfoArray) h.addImage(new et.Elem.Images.Image(m.MsgContent.ImageInfoArray[M].Type, m.MsgContent.ImageInfoArray[M].Size, m.MsgContent.ImageInfoArray[M].Width, m.MsgContent.ImageInfoArray[M].Height, m.MsgContent.ImageInfoArray[M].URL));
                    break;

                  case v.SOUND:
                    m.MsgContent ? h = new et.Elem.Sound(m.MsgContent.UUID, m.MsgContent.Second, m.MsgContent.Size, e.From_Account, e.To_Account, m.MsgContent.Download_Flag, A.GROUP) : (I = v.TEXT, 
                    h = new et.Elem.Text("[语音消息]下载地址解析出错"));
                    break;

                  case v.LOCATION:
                    h = new et.Elem.Location(m.MsgContent.Longitude, m.MsgContent.Latitude, m.MsgContent.Desc);
                    break;

                  case v.FILE:
                  case v.FILE + " ":
                    I = v.FILE, be(m.MsgContent.UUID, e.From_Account, m.MsgContent.FileName), m.MsgContent ? h = new et.Elem.File(m.MsgContent.UUID, m.MsgContent.FileName, m.MsgContent.FileSize, e.From_Account, e.To_Account, m.MsgContent.Download_Flag, A.GROUP) : (I = v.TEXT, 
                    h = new et.Elem.Text("[文件消息]地址解析出错"));
                    break;

                  case v.GROUP_TIP:
                    var _ = m.MsgContent.OpType;
                    if (h = new et.Elem.GroupTip(_, m.MsgContent.Operator_Account, c, e.GroupInfo.GroupName, m.MsgContent.List_Account, m.MsgContent.MsgMemberExtraInfo), 
                    K.JOIN == _ || K.QUIT == _) h.setGroupMemberNum(m.MsgContent.MemberNum); else if (K.MODIFY_GROUP_INFO == _) {
                        var E = !1, T = {
                            GroupId: c,
                            GroupFaceUrl: null,
                            GroupName: null,
                            OwnerAccount: null,
                            GroupNotification: null,
                            GroupIntroduction: null
                        }, C = m.MsgContent.MsgGroupNewInfo;
                        if (C.GroupFaceUrl) {
                            var S = new et.Elem.GroupTip.GroupInfo(H.FACE_URL, C.GroupFaceUrl);
                            h.addGroupInfo(S), E = !0, T.GroupFaceUrl = C.GroupFaceUrl;
                        }
                        if (C.GroupName) {
                            var F = new et.Elem.GroupTip.GroupInfo(H.NAME, C.GroupName);
                            h.addGroupInfo(F), E = !0, T.GroupName = C.GroupName;
                        }
                        if (C.Owner_Account) {
                            var G = new et.Elem.GroupTip.GroupInfo(H.OWNER, C.Owner_Account);
                            h.addGroupInfo(G), E = !0, T.OwnerAccount = C.Owner_Account;
                        }
                        if (C.GroupNotification) {
                            var N = new et.Elem.GroupTip.GroupInfo(H.NOTIFICATION, C.GroupNotification);
                            h.addGroupInfo(N), E = !0, T.GroupNotification = C.GroupNotification;
                        }
                        if (C.GroupIntroduction) {
                            var b = new et.Elem.GroupTip.GroupInfo(H.INTRODUCTION, C.GroupIntroduction);
                            h.addGroupInfo(b), E = !0, T.GroupIntroduction = C.GroupIntroduction;
                        }
                        0 == n && E && t && t(T);
                    } else if (K.MODIFY_MEMBER_INFO == _) {
                        var O = m.MsgContent.MsgMemberInfo;
                        for (var R in O) {
                            var w = O[R];
                            h.addMemberInfo(new et.Elem.GroupTip.MemberInfo(w.User_Account, w.ShutupTime));
                        }
                    }
                    break;

                  case v.CUSTOM:
                    I = v.CUSTOM, h = new et.Elem.Custom(m.MsgContent.Data, m.MsgContent.Desc, m.MsgContent.Ext);
                    break;

                  default:
                    I = v.TEXT, h = new et.Elem.Text("web端暂不支持" + m.MsgType + "消息");
                }
                d.elems.push(new et.Elem(I, h));
            }
            return 0 == o ? d : tt.addMsg(d, !0) ? (d.extraInfo = e.GroupInfo.MsgFrom_AccountExtraInfo, 
            d) : null;
        };
        this.init = function(u, a, l) {
            if (u.onMsgNotify || Ee.warn("listeners.onMsgNotify is empty"), e = u.onMsgNotify, 
            u.onBigGroupMsgNotify ? c = u.onBigGroupMsgNotify : Ee.warn("listeners.onBigGroupMsgNotify is empty"), 
            u.onC2cEventNotifys ? y = u.onC2cEventNotifys : Ee.warn("listeners.onC2cEventNotifys is empty"), 
            u.onGroupSystemNotifys ? n = u.onGroupSystemNotifys : Ee.warn("listeners.onGroupSystemNotifys is empty"), 
            u.onGroupInfoChangeNotify ? t = u.onGroupInfoChangeNotify : Ee.warn("listeners.onGroupInfoChangeNotify is empty"), 
            u.onFriendSystemNotifys ? o = u.onFriendSystemNotifys : Ee.warn("listeners.onFriendSystemNotifys is empty"), 
            u.onProfileSystemNotifys ? i = u.onProfileSystemNotifys : Ee.warn("listeners.onProfileSystemNotifys is empty"), 
            u.onKickedEventCall ? r = u.onKickedEventCall : Ee.warn("listeners.onKickedEventCall is empty"), 
            u.onLongPullingNotify ? he = u.onLongPullingNotify : Ee.warn("listeners.onKickedEventCall is empty"), 
            u.onAppliedDownloadUrl ? u.onAppliedDownloadUrl : Ee.warn("listeners.onAppliedDownloadUrl is empty"), 
            ae.identifier && ae.userSig) !function(e, t) {
                var n = {
                    Member_Account: ae.identifier,
                    Limit: 1e3,
                    Offset: 0,
                    GroupBaseInfoFilter: [ "NextMsgSeq" ]
                };
                Ke(n, function(t) {
                    if (!t.GroupIdList || 0 == t.GroupIdList.length) return Ee.info("initMyGroupMaxSeqs: 目前还没有加入任何群组"), 
                    void (e && e(t));
                    for (var n = 0; n < t.GroupIdList.length; n++) {
                        var o = t.GroupIdList[n].GroupId, i = t.GroupIdList[n].NextMsgSeq - 1;
                        M[o] = i;
                    }
                    e && e(t);
                }, function(e) {
                    Ee.error("initMyGroupMaxSeqs failed:" + e.ErrorInfo), t && t(e);
                });
            }(function(e) {
                Ee.info("initMyGroupMaxSeqs success"), E(function(e) {
                    if (Ee.info("initIpAndAuthkey success"), a) {
                        Ee.info("login success(have login state))");
                        var t = {
                            ActionStatus: C.OK,
                            ErrorCode: 0,
                            ErrorInfo: "login success"
                        };
                        a(t);
                    }
                    nt.setLongPollingOn(!0), s && nt.longPolling(a);
                }, l);
            }, l); else if (a) {
                var p = {
                    ActionStatus: C.OK,
                    ErrorCode: 0,
                    ErrorInfo: "login success(no login state)"
                };
                a(p);
            }
        }, this.sendMsg = function(e, t, n) {
            !function(e, t, n) {
                if (Fe(n, !0)) {
                    var o = null;
                    switch (e.sess.type()) {
                      case A.C2C:
                        o = {
                            From_Account: ae.identifier,
                            To_Account: e.sess.id().toString(),
                            MsgTimeStamp: e.time,
                            MsgSeq: e.seq,
                            MsgRandom: e.random,
                            MsgBody: [],
                            OfflinePushInfo: e.offlinePushInfo
                        };
                        break;

                      case A.GROUP:
                        var i = e.getSubType();
                        switch (o = {
                            GroupId: e.sess.id().toString(),
                            From_Account: ae.identifier,
                            Random: e.random,
                            MsgBody: []
                        }, i) {
                          case q.COMMON:
                            o.MsgPriority = "COMMON";
                            break;

                          case q.REDPACKET:
                            o.MsgPriority = "REDPACKET";
                            break;

                          case q.LOVEMSG:
                            o.MsgPriority = "LOVEMSG";
                            break;

                          case q.TIP:
                            Ee.error("不能主动发送群提示消息,subType=" + i);
                            break;

                          default:
                            return void Ee.error("发送群消息时，出现未知子消息类型：subType=" + i);
                        }
                    }
                    for (var r in e.elems) {
                        var s = e.elems[r], u = null, a = s.type;
                        switch (a) {
                          case v.TEXT:
                            u = {
                                Text: s.content.text
                            };
                            break;

                          case v.FACE:
                            u = {
                                Index: s.content.index,
                                Data: s.content.data
                            };
                            break;

                          case v.IMAGE:
                            var c = [];
                            for (var f in s.content.ImageInfoArray) c.push({
                                Type: s.content.ImageInfoArray[f].type,
                                Size: s.content.ImageInfoArray[f].size,
                                Width: s.content.ImageInfoArray[f].width,
                                Height: s.content.ImageInfoArray[f].height,
                                URL: s.content.ImageInfoArray[f].url
                            });
                            u = {
                                ImageFormat: s.content.ImageFormat,
                                UUID: s.content.UUID,
                                ImageInfoArray: c
                            };
                            break;

                          case v.SOUND:
                            Ee.warn("web端暂不支持发送语音消息");
                            continue;

                          case v.LOCATION:
                            Ee.warn("web端暂不支持发送地理位置消息");
                            continue;

                          case v.FILE:
                            u = {
                                UUID: s.content.uuid,
                                FileName: s.content.name,
                                FileSize: s.content.size,
                                DownloadFlag: s.content.downFlag
                            };
                            break;

                          case v.CUSTOM:
                            u = {
                                Data: s.content.data,
                                Desc: s.content.desc,
                                Ext: s.content.ext
                            }, a = v.CUSTOM;
                            break;

                          default:
                            Ee.warn("web端暂不支持发送" + s.type + "消息");
                            continue;
                        }
                        e.PushInfoBoolean && (o.OfflinePushInfo = e.PushInfo), o.MsgBody.push({
                            MsgType: a,
                            MsgContent: u
                        });
                    }
                    e.sess.type() == A.C2C ? We.apiCall(l, "sendmsg", o, t, n) : e.sess.type() == A.GROUP && We.apiCall(p, "send_group_msg", o, t, n);
                }
            }(e, function(o) {
                if (e.sess.type() == A.C2C) {
                    if (!tt.addMsg(e)) {
                        var i = "sendMsg: addMsg failed!", r = _e.getReturnError(i, -17);
                        return Ee.error(i), void (n && n(r));
                    }
                    tt.updateTimeline();
                }
                t && t(o);
            }, function(e) {
                n && n(e);
            });
        };
    }(), ot = new function() {
        this.fileMd5 = null;
        this.submitUploadFileForm = function(e, t, n) {
            function o(e, t) {
                var n = document.createElement("input");
                n.type = "hidden", n.name = e, n.value = t, p.appendChild(n);
            }
            var i, r, s = e.formId, u = e.fileId, a = "uploadResultIframe_" + re++, c = e.To_Account, l = e.businessType, p = document.getElementById(s);
            if (!p) return i = "获取表单对象为空: formId=" + s + "(formId非法)", r = _e.getReturnError(i, -20), 
            void (n && n(r));
            var f = document.getElementById(u);
            if (!f) return i = "获取文件对象为空: fileId=" + u + "(没有选择文件或者fileId非法)", r = _e.getReturnError(i, -21), 
            void (n && n(r));
            f.name = "file";
            var g = document.createElement("iframe");
            g.name = a, g.id = a, g.style.display = "none", document.body.appendChild(g);
            var d = "https://pic.tim.qq.com/v4/openpic/" + (Ge() ? "pic_up" : "pic_up_test") + "?tinyid=" + ae.tinyid + "&a2=" + ae.a2 + "&sdkappid=" + ae.sdkAppID + "&accounttype=" + ae.accountType + "&contenttype=http";
            p.action = d, p.method = "post", p.target = a, o("App_Version", L.APP_VERSION), 
            o("From_Account", ae.identifier), o("To_Account", c), o("Seq", Ae().toString()), 
            o("Timestamp", Te().toString()), o("Random", Ce().toString()), o("Busi_Id", l), 
            o("PkgFlag", G.RAW_DATA.toString()), o("Auth_Key", ue), o("Server_Ver", L.SERVER_VERSION.toString()), 
            o("File_Type", e.fileType), setTimeout(function e() {
                var o;
                try {
                    o = JSON.parse(g.contentWindow.name) || {};
                } catch (e) {
                    o = {};
                }
                o.ActionStatus ? (g.src = "about:blank", g.parentNode.removeChild(g), g = null, 
                o.ActionStatus == C.OK ? t && t(o) : n && n(o)) : setTimeout(e, 100);
            }, 500), p.submit();
        }, this.uploadFile = function(e, t, n) {
            var o = {
                init: function(e, t, n) {
                    var o = this;
                    o.file = e.file, o.onProgressCallBack = e.onProgressCallBack, e.abortButton && (e.abortButton.onclick = o.abortHandler), 
                    o.total = o.file.size, o.loaded = 0, o.step = 1105920, o.sliceSize = 0, o.sliceOffset = 0, 
                    o.timestamp = Te(), o.seq = Ae(), o.random = Ce(), o.fromAccount = ae.identifier, 
                    o.toAccount = e.To_Account, o.fileMd5 = e.fileMd5, o.businessType = e.businessType, 
                    o.fileType = e.fileType, o.cbOk = t, o.cbErr = n, o.reader = new FileReader(), o.blobSlice = File.prototype.mozSlice || File.prototype.webkitSlice || File.prototype.slice, 
                    o.reader.onloadstart = o.onLoadStart, o.reader.onprogress = o.onProgress, o.reader.onabort = o.onAbort, 
                    o.reader.onerror = o.onerror, o.reader.onload = o.onLoad, o.reader.onloadend = o.onLoadEnd;
                },
                upload: function() {
                    o.readBlob(0);
                },
                onLoadStart: function() {},
                onProgress: function(e) {
                    var t = o;
                    t.loaded += e.loaded, t.onProgressCallBack && t.onProgressCallBack(t.loaded, t.total);
                },
                onAbort: function() {},
                onError: function() {},
                onLoad: function(e) {
                    var t = o;
                    if (e.target.readyState == FileReader.DONE) {
                        var n = e.target.result, i = n.indexOf(",");
                        -1 != i && (n = n.substr(i + 1));
                        var r = {
                            From_Account: t.fromAccount,
                            To_Account: t.toAccount,
                            Busi_Id: t.businessType,
                            File_Type: t.fileType,
                            File_Str_Md5: t.fileMd5,
                            PkgFlag: G.BASE64_DATA,
                            File_Size: t.total,
                            Slice_Offset: t.sliceOffset,
                            Slice_Size: t.sliceSize,
                            Slice_Data: n,
                            Seq: t.seq,
                            Timestamp: t.timestamp,
                            Random: t.random
                        }, s = function(e) {
                            if (0 == e.IsFinish) t.loaded = e.Next_Offset, t.loaded < t.total ? t.readBlob(t.loaded) : t.loaded = t.total; else if (t.cbOk) {
                                var n = {
                                    ActionStatus: e.ActionStatus,
                                    ErrorCode: e.ErrorCode,
                                    ErrorInfo: e.ErrorInfo,
                                    File_UUID: e.File_UUID,
                                    File_Size: e.Next_Offset,
                                    URL_INFO: e.URL_INFO,
                                    Download_Flag: e.Download_Flag
                                };
                                t.fileType == w.FILE && (n.URL_INFO = be(e.File_UUID, ae.identifier, t.file.name)), 
                                t.cbOk(n);
                            }
                            te = 0;
                        };
                        Ve(r, s, function e(n) {
                            te < 20 ? (te++, setTimeout(function() {
                                Ve(r, s, e);
                            }, 1e3)) : t.cbErr(n);
                        });
                    }
                },
                onLoadEnd: function() {},
                readBlob: function(e) {
                    var t, n = o, i = n.file, r = e + n.step;
                    r > n.total ? (r = n.total, n.sliceSize = r - e) : n.sliceSize = n.step, n.sliceOffset = e, 
                    t = n.blobSlice.call(i, e, r), n.reader.readAsDataURL(t);
                },
                abortHandler: function() {
                    var e = o;
                    e.reader && e.reader.abort();
                }
            };
            !function(e, t, n) {
                function o() {
                    var t = a * s, n = t + s >= e.size ? e.size : t + s, o = r.call(e, t, n);
                    i.readAsArrayBuffer(o);
                }
                var i = null;
                try {
                    i = new FileReader();
                } catch (e) {
                    if (n) return void n(_e.getReturnError("当前浏览器不支持FileReader", -18));
                }
                var r = File.prototype.mozSlice || File.prototype.webkitSlice || File.prototype.slice;
                if (r || !n) {
                    var s = 2097152, u = Math.ceil(e.size / s), a = 0, c = new SparkMD5();
                    i.onload = function(e) {
                        for (var n = "", i = new Uint8Array(e.target.result), r = i.byteLength, s = 0; s < r; s++) n += String.fromCharCode(i[s]);
                        c.appendBinary(n), ++a < u ? o() : (this.fileMd5 = c.end(), t && t(this.fileMd5));
                    }, o();
                } else n(_e.getReturnError("当前浏览器不支持FileAPI", -19));
            }(e.file, function(i) {
                Ee.info("fileMd5: " + i), e.fileMd5 = i, o.init(e, t, n), o.upload();
            }, n);
        };
    }();
    n.SESSION_TYPE = A, n.MSG_MAX_LENGTH = {
        C2C: 12e3,
        GROUP: 8898
    }, n.C2C_MSG_SUB_TYPE = U, n.GROUP_MSG_SUB_TYPE = q, n.MSG_ELEMENT_TYPE = v, n.GROUP_TIP_TYPE = K, 
    n.IMAGE_TYPE = S, n.GROUP_SYSTEM_TYPE = J, n.FRIEND_NOTICE_TYPE = z, n.GROUP_TIP_MODIFY_GROUP_INFO_TYPE = H, 
    n.BROWSER_INFO = a, n.Emotions = n.EmotionPicData = Me, n.EmotionDataIndexs = n.EmotionPicDataIndex = ye, 
    n.TLS_ERROR_CODE = {
        OK: 0,
        SIGNATURE_EXPIRATION: 11
    }, n.CONNECTION_STATUS = Y, n.UPLOAD_PIC_BUSSINESS_TYPE = {
        GROUP_MSG: 1,
        C2C_MSG: 2,
        USER_HEAD: 3,
        GROUP_HEAD: 4
    }, n.RECENT_CONTACT_TYPE = {
        C2C: 1,
        GROUP: 2
    }, n.UPLOAD_RES_TYPE = w, n.Tool = _e, n.Log = Ee, n.Msg = et, n.Session = Qe, n.MsgStore = {
        sessMap: function() {
            return tt.sessMap();
        },
        sessCount: function() {
            return tt.sessCount();
        },
        sessByTypeId: function(e, t) {
            return tt.sessByTypeId(e, t);
        },
        delSessByTypeId: function(e, t) {
            return tt.delSessByTypeId(e, t);
        },
        resetCookieAndSyncFlag: function() {
            return tt.resetCookieAndSyncFlag();
        }
    }, n.Resources = Ie, n.login = n.init = function(e, t, n, o, i) {
        We.init(t.onConnNotify, o, i), t.jsonpCallback && (ie = t.jsonpCallback), we(e, t, n, o, i);
    }, n.logout = n.offline = function(e, t) {
        return ke("instance", e, t);
    }, n.logoutAll = function(e, t) {
        return ke("all", e, t);
    }, n.sendMsg = function(e, t, n) {
        return nt.sendMsg(e, t, n);
    }, n.syncMsgs = function(e, t) {
        return nt.syncMsgs(e, t);
    }, n.getC2CHistoryMsgs = function(e, t, n) {
        return nt.getC2CHistoryMsgs(e, t, n);
    }, n.syncGroupMsgs = function(e, t, n) {
        return nt.syncGroupMsgs(e, t, n);
    }, n.c2CMsgReaded = function(e, t, n) {
        return tt.c2CMsgReaded(e, t, n);
    }, n.groupMsgReaded = function(e, t, n) {
        return He(e, t, n);
    }, n.setAutoRead = function(e, t, n) {
        return tt.setAutoRead(e, t, n);
    }, n.createGroup = function(e, t, n) {
        return function(e, t, n) {
            if (Fe(n, !0)) {
                for (var o = {
                    Type: e.Type,
                    Name: e.Name
                }, i = [], r = 0; r < e.MemberList.length; r++) i.push({
                    Member_Account: e.MemberList[r]
                });
                o.MemberList = i, e.GroupId && (o.GroupId = e.GroupId), e.Owner_Account && (o.Owner_Account = e.Owner_Account), 
                e.Introduction && (o.Introduction = e.Introduction), e.Notification && (o.Notification = e.Notification), 
                e.MaxMemberCount && (o.MaxMemberCount = e.MaxMemberCount), e.ApplyJoinOption && (o.ApplyJoinOption = e.ApplyJoinOption), 
                e.AppDefinedData && (o.AppDefinedData = e.AppDefinedData), e.FaceUrl && (o.FaceUrl = e.FaceUrl), 
                We.apiCall(p, "create_group", o, t, n);
            }
        }(e, t, n);
    }, n.createGroupHigh = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(p, "create_group", e, t, n);
        }(e, t, n);
    }, n.applyJoinGroup = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && (e.GroupId = String(e.GroupId), We.apiCall(p, "apply_join_group", {
                GroupId: e.GroupId,
                ApplyMsg: e.ApplyMsg,
                UserDefinedField: e.UserDefinedField
            }, t, n));
        }(e, t, n);
    }, n.handleApplyJoinGroupPendency = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(p, "handle_apply_join_group", {
                GroupId: e.GroupId,
                Applicant_Account: e.Applicant_Account,
                HandleMsg: e.HandleMsg,
                Authentication: e.Authentication,
                MsgKey: e.MsgKey,
                ApprovalMsg: e.ApprovalMsg,
                UserDefinedField: e.UserDefinedField
            }, t, function(e) {
                if (10024 == e.ErrorCode) {
                    if (t) {
                        var o = {
                            ActionStatus: C.OK,
                            ErrorCode: 0,
                            ErrorInfo: "该申请已经被处理过"
                        };
                        t(o);
                    }
                } else n && n(e);
            });
        }(e, t, n);
    }, n.getPendencyGroup = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(p, "get_pendency", {
                StartTime: e.StartTime,
                Limit: e.Limit,
                Handle_Account: ae.identifier
            }, t, function(e) {});
        }(e, t, n);
    }, n.getPendencyGroupRead = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(p, "report_pendency", {
                ReportTime: e.ReportTime,
                From_Account: ae.identifier
            }, t, function(e) {});
        }(e, t, n);
    }, n.handleInviteJoinGroupRequest = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(p, "handle_invite_join_group", {
                GroupId: e.GroupId,
                Inviter_Account: e.Inviter_Account,
                HandleMsg: e.HandleMsg,
                Authentication: e.Authentication,
                MsgKey: e.MsgKey,
                ApprovalMsg: e.ApprovalMsg,
                UserDefinedField: e.UserDefinedField
            }, t, function(e) {});
        }(e, t, n);
    }, n.deleteApplyJoinGroupPendency = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(l, "deletemsg", e, t, n);
        }(e, t, n);
    }, n.quitGroup = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(p, "quit_group", {
                GroupId: e.GroupId
            }, t, n);
        }(e, t, n);
    }, n.searchGroupByName = function(e, t, n) {
        return function(e, t, n) {
            We.apiCall(p, "search_group", e, t, n);
        }(e, t, n);
    }, n.getGroupPublicInfo = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(p, "get_group_public_info", {
                GroupIdList: e.GroupIdList,
                ResponseFilter: {
                    GroupBasePublicInfoFilter: e.GroupBasePublicInfoFilter
                }
            }, function(e) {
                if (e.ErrorInfo = "", e.GroupInfo) for (var o in e.GroupInfo) {
                    var i = e.GroupInfo[o].ErrorCode;
                    i > 0 && (e.ActionStatus = C.FAIL, e.GroupInfo[o].ErrorInfo = "[" + i + "]" + e.GroupInfo[o].ErrorInfo, 
                    e.ErrorInfo += e.GroupInfo[o].ErrorInfo + "\n");
                }
                e.ActionStatus == C.FAIL ? n && n(e) : t && t(e);
            }, n);
        }(e, t, n);
    }, n.getGroupInfo = function(e, t, n) {
        return function(e, t, n) {
            if (Fe(n, !0)) {
                var o = {
                    GroupIdList: e.GroupIdList,
                    ResponseFilter: {
                        GroupBaseInfoFilter: e.GroupBaseInfoFilter,
                        MemberInfoFilter: e.MemberInfoFilter
                    }
                };
                e.AppDefinedDataFilter_Group && (o.ResponseFilter.AppDefinedDataFilter_Group = e.AppDefinedDataFilter_Group), 
                e.AppDefinedDataFilter_GroupMember && (o.ResponseFilter.AppDefinedDataFilter_GroupMember = e.AppDefinedDataFilter_GroupMember), 
                We.apiCall(p, "get_group_info", o, t, n);
            }
        }(e, t, n);
    }, n.modifyGroupBaseInfo = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(p, "modify_group_base_info", e, t, n);
        }(e, t, n);
    }, n.getGroupMemberInfo = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(p, "get_group_member_info", {
                GroupId: e.GroupId,
                Offset: e.Offset,
                Limit: e.Limit,
                MemberInfoFilter: e.MemberInfoFilter,
                MemberRoleFilter: e.MemberRoleFilter,
                AppDefinedDataFilter_GroupMember: e.AppDefinedDataFilter_GroupMember
            }, t, n);
        }(e, t, n);
    }, n.addGroupMember = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(p, "add_group_member", {
                GroupId: e.GroupId,
                Silence: e.Silence,
                MemberList: e.MemberList
            }, t, n);
        }(e, t, n);
    }, n.modifyGroupMember = function(e, t, n) {
        return function(e, t, n) {
            if (Fe(n, !0)) {
                var o = {};
                e.GroupId && (o.GroupId = e.GroupId), e.Member_Account && (o.Member_Account = e.Member_Account), 
                e.Role && (o.Role = e.Role), e.MsgFlag && (o.MsgFlag = e.MsgFlag), e.ShutUpTime && (o.ShutUpTime = e.ShutUpTime), 
                e.NameCard && (o.NameCard = e.NameCard), e.AppMemberDefinedData && (o.AppMemberDefinedData = e.AppMemberDefinedData), 
                We.apiCall(p, "modify_group_member_info", o, t, n);
            }
        }(e, t, n);
    }, n.deleteGroupMember = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(p, "delete_group_member", {
                GroupId: e.GroupId,
                Silence: e.Silence,
                MemberToDel_Account: e.MemberToDel_Account,
                Reason: e.Reason
            }, t, n);
        }(e, t, n);
    }, n.destroyGroup = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(p, "destroy_group", {
                GroupId: e.GroupId
            }, t, n);
        }(e, t, n);
    }, n.changeGroupOwner = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(p, "change_group_owner", e, t, n);
        }(e, t, n);
    }, n.getJoinedGroupListHigh = function(e, t, n) {
        return Ke(e, t, n);
    }, n.getRoleInGroup = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(p, "get_role_in_group", {
                GroupId: e.GroupId,
                User_Account: e.User_Account
            }, t, n);
        }(e, t, n);
    }, n.forbidSendMsg = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(p, "forbid_send_msg", {
                GroupId: e.GroupId,
                Members_Account: e.Members_Account,
                ShutUpTime: e.ShutUpTime
            }, t, n);
        }(e, t, n);
    }, n.sendCustomGroupNotify = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(p, "send_group_system_notification", e, t, n);
        }(e, t, n);
    }, n.applyJoinBigGroup = function(e, t, n) {
        return function(e, t, n) {
            var o;
            e.GroupId = String(e.GroupId), o = Fe(n, !1) ? p : h, nt.checkBigGroupLongPollingOn(e.GroupId) ? n && n(_e.getReturnError("Join Group failed; You have already been in this group, you have to quit group before you rejoin", 10013)) : We.apiCall(o, "apply_join_group", {
                GroupId: e.GroupId,
                ApplyMsg: e.ApplyMsg,
                UserDefinedField: e.UserDefinedField
            }, function(o) {
                if (o.JoinedStatus && "JoinedSuccess" == o.JoinedStatus) {
                    if (!o.LongPollingKey) return void (n && n(_e.getReturnError("Join Group succeed; But the type of group is not AVChatRoom: groupid=" + e.GroupId, -12)));
                    nt.setBigGroupLongPollingOn(!0), nt.setBigGroupLongPollingKey(e.GroupId, o.LongPollingKey), 
                    nt.setBigGroupLongPollingMsgMap(e.GroupId, 0), nt.bigGroupLongPolling(e.GroupId);
                }
                t && t(o);
            }, function(e) {
                n && n(e);
            });
        }(e, t, n);
    }, n.quitBigGroup = function(e, t, n) {
        return function(e, t, n) {
            var o;
            o = Fe(n, !1) ? p : h, nt.resetBigGroupLongPollingInfo(e.GroupId), We.apiCall(o, "quit_group", {
                GroupId: e.GroupId
            }, function(n) {
                tt.delSessByTypeId(A.GROUP, e.GroupId), t && t(n);
            }, n);
        }(e, t, n);
    }, n.getProfilePortrait = function(e, t, n) {
        return ze(e, t, n);
    }, n.setProfilePortrait = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(g, "portrait_set", {
                From_Account: ae.identifier,
                ProfileItem: e.ProfileItem
            }, function(n) {
                for (var o in e.ProfileItem) {
                    var i = e.ProfileItem[o];
                    if ("Tag_Profile_IM_Nick" == i.Tag) {
                        ae.identifierNick = i.Value;
                        break;
                    }
                }
                t && t(n);
            }, n);
        }(e, t, n);
    }, n.applyAddFriend = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(f, "friend_add", {
                From_Account: ae.identifier,
                AddFriendItem: e.AddFriendItem
            }, function(e) {
                var o = Je(e);
                o.ActionStatus == C.FAIL ? n && n(o) : t && t(o);
            }, n);
        }(e, t, n);
    }, n.getPendency = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(f, "pendency_get", {
                From_Account: ae.identifier,
                PendencyType: e.PendencyType,
                StartTime: e.StartTime,
                MaxLimited: e.MaxLimited,
                LastSequence: e.LastSequence
            }, t, n);
        }(e, t, n);
    }, n.getPendencyReport = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(f, "PendencyReport", {
                From_Account: ae.identifier,
                LatestPendencyTimeStamp: e.LatestPendencyTimeStamp
            }, t, n);
        }(e, t, n);
    }, n.deletePendency = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(f, "pendency_delete", {
                From_Account: ae.identifier,
                PendencyType: e.PendencyType,
                To_Account: e.To_Account
            }, function(e) {
                var o = Je(e);
                o.ActionStatus == C.FAIL ? n && n(o) : t && t(o);
            }, n);
        }(e, t, n);
    }, n.responseFriend = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(f, "friend_response", {
                From_Account: ae.identifier,
                ResponseFriendItem: e.ResponseFriendItem
            }, function(e) {
                var o = Je(e);
                o.ActionStatus == C.FAIL ? n && n(o) : t && t(o);
            }, n);
        }(e, t, n);
    }, n.getAllFriend = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(f, "friend_get_all", {
                From_Account: ae.identifier,
                TimeStamp: e.TimeStamp,
                StartIndex: e.StartIndex,
                GetCount: e.GetCount,
                LastStandardSequence: e.LastStandardSequence,
                TagList: e.TagList
            }, t, n);
        }(e, t, n);
    }, n.deleteChat = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && (1 == e.chatType ? We.apiCall(M, "delete", {
                From_Account: ae.identifier,
                Type: e.chatType,
                To_Account: e.To_Account
            }, t, n) : We.apiCall(M, "delete", {
                From_Account: ae.identifier,
                Type: e.chatType,
                ToGroupid: e.To_Account
            }, t, n));
        }(e, t, n);
    }, n.deleteFriend = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(f, "friend_delete", {
                From_Account: ae.identifier,
                To_Account: e.To_Account,
                DeleteType: e.DeleteType
            }, function(e) {
                var o = Je(e);
                o.ActionStatus == C.FAIL ? n && n(o) : t && t(o);
            }, n);
        }(e, t, n);
    }, n.addBlackList = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(f, "black_list_add", {
                From_Account: ae.identifier,
                To_Account: e.To_Account
            }, function(e) {
                var o = Je(e);
                o.ActionStatus == C.FAIL ? n && n(o) : t && t(o);
            }, n);
        }(e, t, n);
    }, n.deleteBlackList = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(f, "black_list_delete", {
                From_Account: ae.identifier,
                To_Account: e.To_Account
            }, function(e) {
                var o = Je(e);
                o.ActionStatus == C.FAIL ? n && n(o) : t && t(o);
            }, n);
        }(e, t, n);
    }, n.getBlackList = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(f, "black_list_get", {
                From_Account: ae.identifier,
                StartIndex: e.StartIndex,
                MaxLimited: e.MaxLimited,
                LastSequence: e.LastSequence
            }, t, n);
        }(e, t, n);
    }, n.getRecentContactList = function(e, t, n) {
        return function(e, t, n) {
            Fe(n, !0) && We.apiCall(d, "get", {
                From_Account: ae.identifier,
                Count: e.Count
            }, t, n);
        }(e, t, n);
    }, n.uploadFile = n.uploadPic = function(e, t, n) {
        return ot.uploadFile(e, t, n);
    }, n.submitUploadFileForm = function(e, t, n) {
        return ot.submitUploadFileForm(e, t, n);
    }, n.uploadFileByBase64 = n.uploadPicByBase64 = function(e, t, n) {
        var o = {
            To_Account: e.toAccount,
            Busi_Id: e.businessType,
            File_Type: e.File_Type,
            File_Str_Md5: e.fileMd5,
            PkgFlag: G.BASE64_DATA,
            File_Size: e.totalSize,
            Slice_Offset: 0,
            Slice_Size: e.totalSize,
            Slice_Data: e.base64Str,
            Seq: Ae(),
            Timestamp: Te(),
            Random: Ce()
        };
        return Ve(o, t, n);
    }, n.setJsonpLastRspData = function(e) {
        oe = "string" == typeof e ? JSON.parse(e) : e;
    }, n.getLongPollingId = function(e, t, n) {
        return Xe(0, t, n);
    }, n.applyDownload = function(e, t, n) {
        return je(e, t, n);
    }, n.onDownFile = function(e) {
        window.open(Ie.downloadMap["uuid_" + e]);
    }, n.checkLogin = function(e, t) {
        return Fe(e, t);
    };
}({
    login: function(e, t, n) {},
    syncMsgs: function(e, t) {},
    getC2CHistoryMsgs: function(e, t, n) {},
    syncGroupMsgs: function(e, t, n) {},
    sendMsg: function(e, t, n) {},
    logout: function(e, t) {},
    setAutoRead: function(e, t, n) {},
    getProfilePortrait: function(e, t, n) {},
    setProfilePortrait: function(e, t, n) {},
    applyAddFriend: function(e, t, n) {},
    getPendency: function(e, t, n) {},
    deletePendency: function(e, t, n) {},
    responseFriend: function(e, t, n) {},
    getAllFriend: function(e, t, n) {},
    deleteFriend: function(e, t, n) {},
    addBlackList: function(e, t, n) {},
    getBlackList: function(e, t, n) {},
    deleteBlackList: function(e, t, n) {},
    uploadPic: function(e, t, n) {},
    createGroup: function(e, t, n) {},
    applyJoinGroup: function(e, t, n) {},
    handleApplyJoinGroup: function(e, t, n) {},
    deleteApplyJoinGroupPendency: function(e, t, n) {},
    quitGroup: function(e, t, n) {},
    getGroupPublicInfo: function(e, t, n) {},
    getGroupInfo: function(e, t, n) {},
    modifyGroupBaseInfo: function(e, t, n) {},
    destroyGroup: function(e, t, n) {},
    getJoinedGroupListHigh: function(e, t, n) {},
    getGroupMemberInfo: function(e, t, n) {},
    addGroupMember: function(e, t, n) {},
    modifyGroupMember: function(e, t, n) {},
    forbidSendMsg: function(e, t, n) {},
    deleteGroupMember: function(e, t, n) {},
    getPendencyGroup: function(e, t, n) {},
    getPendencyReport: function(e, t, n) {},
    getPendencyGroupRead: function(e, t, n) {},
    sendCustomGroupNotify: function(e, t, n) {},
    Msg: function(e, t, n, o, i, r, s, u, a) {},
    MsgStore: {
        sessMap: function() {
            return {};
        },
        sessCount: function() {
            return 0;
        },
        sessByTypeId: function(e, t) {
            return {};
        },
        delSessByTypeId: function(e, t) {
            return !0;
        },
        resetCookieAndSyncFlag: function() {},
        downloadMap: {}
    }
});